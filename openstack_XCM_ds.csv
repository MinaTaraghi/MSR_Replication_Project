,0,1
0,puppet-tripleo/manifests/profile/base/neutron/plugins/ml2.pp,"Merge ""Remove manifests for networking-ansible plugin""
Remove manifests for VPP and Neutron ML2/VPP plugin

... because these services are no longer supported by t-h-t. This
allows us to remove puppet-fdio, which looks unmaintained, from
the dependencies.

Depends-on: https://review.opendev.org/864605
Change-Id: Ibe0a59ad3dd9069e9650036cb2af31a3b9ddfb69

Remove manifests for networking-ansible plugin

... because it is no longer supported by t-h-t.

Depends-on: https://review.opendev.org/864607
Change-Id: Ie76536c8e3f80feee09ff5b5f8781e938a6e3e56
"
1,puppet-tripleo/manifests/profile/pacemaker/database/mysql_bundle.pp,"Template option addition for --pids-limit on Galera cluster resource

mysql_bundle.pp has been modified to be able to configure --pids-limit option
using a template. By default the parameter remains 'undef' when not specified.
When ""tripleo::profile::pacemaker::database::mysql_bundle::pids_limit:"" is used
as an ExtraConfig it will automatically set the value in the Galera cluster
resource.

Closes-Bug: #1982751

Change-Id: Iffe9c9a1d7ca736f273d2da43928d7da4a99d1d6

Allow passing aditional arguments to wsrep_provider_options

This commit allows to inject arbitrary arguments into the
wsrep_provider_options string.
Operators should be extremely careful in doing so as there is no
validation or syntax checking whatsoever.

Example:

ExtraConfig:
  tripleo::profile::pacemaker::database::mysql_bundle::provider_options: 'evs.suspect_timeout=PT30S'

results in:

wsrep_provider_options = evs.suspect_timeout=PT30S;gcache.recover=no;gmcast.listen_addr=tcp://172.17.0.151:4567;socket.ssl_key=/etc/pki/tls/private/mysql.key;socket.ssl_cert=/etc/pki/tls/certs/mysql.crt;socket.ssl_cipher=AES128-SHA256;socket.ssl_ca=/etc/ipa/ca.crt;

Change-Id: Ie4711ace66846b10252bccdddae84e045af3f604
"
2,puppet-tripleo/manifests/profile/base/neutron/agents/vpp.pp,"Remove manifests for VPP and Neutron ML2/VPP plugin

... because these services are no longer supported by t-h-t. This
allows us to remove puppet-fdio, which looks unmaintained, from
the dependencies.

Depends-on: https://review.opendev.org/864605
Change-Id: Ibe0a59ad3dd9069e9650036cb2af31a3b9ddfb69
"
3,puppet-tripleo/manifests/profile/base/neutron/plugins/ml2/vpp.pp,"Remove manifests for VPP and Neutron ML2/VPP plugin

... because these services are no longer supported by t-h-t. This
allows us to remove puppet-fdio, which looks unmaintained, from
the dependencies.

Depends-on: https://review.opendev.org/864605
Change-Id: Ibe0a59ad3dd9069e9650036cb2af31a3b9ddfb69
"
4,puppet-tripleo/manifests/profile/base/vpp.pp,"Remove manifests for VPP and Neutron ML2/VPP plugin

... because these services are no longer supported by t-h-t. This
allows us to remove puppet-fdio, which looks unmaintained, from
the dependencies.

Depends-on: https://review.opendev.org/864605
Change-Id: Ibe0a59ad3dd9069e9650036cb2af31a3b9ddfb69
"
5,puppet-tripleo/manifests/profile/base/neutron/plugins/ml2/networking_ansible.pp,"Remove manifests for networking-ansible plugin

... because it is no longer supported by t-h-t.

Depends-on: https://review.opendev.org/864607
Change-Id: Ie76536c8e3f80feee09ff5b5f8781e938a6e3e56
"
6,puppet-tripleo/manifests/profile/base/cinder/volume/ibm_svf.pp,"Support for Cinder IBM Svf driver

This patch adds support for Cinder IBM Spectrum virtualize family (Svf)
driver.

Depends-On: I43f954879de6ce70237cb468e7ef1fbc2649edcd
Change-Id: I3c74f492d9d34eb8e16d9a203b5f02714b02f69a
"
7,puppet-tripleo/manifests/profile/base/cinder/volume.pp,"Support for Cinder IBM Svf driver

This patch adds support for Cinder IBM Spectrum virtualize family (Svf)
driver.

Depends-On: I43f954879de6ce70237cb468e7ef1fbc2649edcd
Change-Id: I3c74f492d9d34eb8e16d9a203b5f02714b02f69a
"
8,puppet-tripleo/manifests/haproxy.pp,"Support deploying additional internal glance-api service

OSSN-0090 [1] recommends deploying two instances of the glance-api
service: a ""user facing"" service, plus an ""internal"" service that is
accessible via keystone's internal endpoint.

To support this, the tripleo::profile::base::glance::api class is
enhanced to allow overriding certain associated glance::api parameters.
This makes it possible to override parameters when including the
glance::api class in order to facilitate configuring two different
instances of the glance-api service, each with their own configuration.

The tripleo::haproxy class is enhanced to provide HA support for running
the internal glance-api service on its own TCP port (defaults to 9293).

[1] https://wiki.openstack.org/wiki/OSSN/OSSN-0090

Change-Id: Ideb5a951d538d9e2c7cca11dfe0e8b99520de959

Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
9,puppet-tripleo/manifests/profile/base/glance/api.pp,"Support deploying additional internal glance-api service

OSSN-0090 [1] recommends deploying two instances of the glance-api
service: a ""user facing"" service, plus an ""internal"" service that is
accessible via keystone's internal endpoint.

To support this, the tripleo::profile::base::glance::api class is
enhanced to allow overriding certain associated glance::api parameters.
This makes it possible to override parameters when including the
glance::api class in order to facilitate configuring two different
instances of the glance-api service, each with their own configuration.

The tripleo::haproxy class is enhanced to provide HA support for running
the internal glance-api service on its own TCP port (defaults to 9293).

[1] https://wiki.openstack.org/wiki/OSSN/OSSN-0090

Change-Id: Ideb5a951d538d9e2c7cca11dfe0e8b99520de959
"
10,puppet-tripleo/manifests/profile/base/keystone.pp,"Merge ""Disable keystone domain creation by keystone::ldap_backend""
Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
11,puppet-tripleo/manifests/fencing.pp,"Merge ""fencing: Remove unused logic to detect deployment type""
fencing: Remove unused logic to detect deployment type

The tripleo::fencing class is used only at host and is not used by
puppet run inside containers. Thus checking the deployment_type fact
is useless and we can always assume the class is executed at host.

Change-Id: I87c78b6d12eeec7c69ed52eac5d6a261ae855aca

Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
12,puppet-tripleo/manifests/profile/base/metrics/qdr.pp,"Correct TLS cert permission

This patch corrects file permission of cert directory and certificates
for QDR.

Change-Id: I5a8e4b3598d5e5a30ec967fba504bac91c7f51ec

Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
13,puppet-tripleo/manifests/profile/base/database/mysql/client.pp,"MySQL Client: Remove logic for non-containerized deployment

... because current TripleO supports only running services in
containers.

Change-Id: I13d3d3f796071c19670cb04a30536ca161b624e0
"
14,puppet-tripleo/manifests/pacemaker/haproxy_with_vip.pp,"haproxy: Remove logic for non-containerized haproxy service

... because current TripleO no longer supports running haproxy service
at host.

Change-Id: Ic21f33d9a1003b32a1724d2bc4672a646afae211
"
15,puppet-tripleo/manifests/haproxy/endpoint.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
16,puppet-tripleo/manifests/haproxy/horizon_endpoint.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
17,puppet-tripleo/manifests/profile/base/aodh/authtoken.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
18,puppet-tripleo/manifests/profile/base/apache.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
19,puppet-tripleo/manifests/profile/base/cinder.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
20,puppet-tripleo/manifests/profile/base/cinder/authtoken.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
21,puppet-tripleo/manifests/profile/base/cinder/volume/dellsc.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
22,puppet-tripleo/manifests/profile/base/cinder/volume/nvmeof.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
23,puppet-tripleo/manifests/profile/base/designate/authtoken.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
24,puppet-tripleo/manifests/profile/base/glance/authtoken.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
25,puppet-tripleo/manifests/profile/base/glance/backend/cinder.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
26,puppet-tripleo/manifests/profile/base/gnocchi/authtoken.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
27,puppet-tripleo/manifests/profile/base/heat.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
28,puppet-tripleo/manifests/profile/base/heat/authtoken.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
29,puppet-tripleo/manifests/profile/base/ironic/authtoken.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
30,puppet-tripleo/manifests/profile/base/ironic_inspector/authtoken.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
31,puppet-tripleo/manifests/profile/base/manila/authtoken.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
32,puppet-tripleo/manifests/profile/base/metrics/collectd.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
33,puppet-tripleo/manifests/profile/base/metrics/collectd/sensubility.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
34,puppet-tripleo/manifests/profile/base/neutron.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
35,puppet-tripleo/manifests/profile/base/neutron/authtoken.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
36,puppet-tripleo/manifests/profile/base/neutron/dhcp_agent_wrappers.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
37,puppet-tripleo/manifests/profile/base/neutron/l3_agent_wrappers.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
38,puppet-tripleo/manifests/profile/base/neutron/linuxbridge.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
39,puppet-tripleo/manifests/profile/base/neutron/ovn_metadata_agent_wrappers.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
40,puppet-tripleo/manifests/profile/base/nova.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
41,puppet-tripleo/manifests/profile/base/nova/api.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
42,puppet-tripleo/manifests/profile/base/nova/authtoken.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
43,puppet-tripleo/manifests/profile/base/nova/compute_libvirt_shared.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
44,puppet-tripleo/manifests/profile/base/nova/migration/client.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
45,puppet-tripleo/manifests/profile/base/octavia/authtoken.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
46,puppet-tripleo/manifests/profile/base/pacemaker.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
47,puppet-tripleo/manifests/profile/base/placement/authtoken.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
48,puppet-tripleo/manifests/profile/base/qdr.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
49,puppet-tripleo/manifests/profile/base/rabbitmq.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
50,puppet-tripleo/manifests/tls_proxy.pp,"Fix typos in parameter descriptions, comments and tests

Change-Id: I75b17e41aff3a63b618b6cada01f225f93a4ff4f
"
51,puppet-openstack-integration/manifests/manila.pp,"Merge ""Manila: Remove workaround for missing sudoers record""
Enable manila-data service

The puppet-manila module now supports setting up the service. Let's
enable the feature in our CI jobs.

Depends-on: https://review.opendev.org/865795
Change-Id: I329fab00774d131018ba65f374d7515fc439148a

Manila: Remove workaround for missing sudoers record

... because it has been fixed in the manila package [1].

[1] https://review.rdoproject.org/r/c/openstack/manila-distgit/+/44699

Change-Id: Ic5b5327a1462cbe980356b8716f0558710abc6b1
"
52,puppet-openstack-integration/manifests/glance.pp,"Glance: Stop setting native ssl parameters

Glance has already removed support for native ssl support[1]. These
glance::api class parameters were also deprecated and will be removed
during this cycle.

[1] 2a2f349d8a1f0426f77bdbea6c70a316b4c3daa0

Depends-on: https://review.opendev.org/834501
Change-Id: I72fd6841d24197e9c747116437d49911e9c5b8b0
"
53,puppet-openstack-integration/manifests/repos.pp,"Merge ""Install ruby-augeas in Debian""
Merge ""Remove logic for CentOS < 9""
Remove logic for CentOS < 9

... because RDO supports CentOS Stream 9 (aka CentOS 9) only since Zed.

Change-Id: Ic8f5d35aca87a5df40864aeec3b04b5ea746188c

Allow disabling separate Ceph repository

This change introduces the new flag to disable the separate Ceph
repository. This is now required to migrate Ubuntu job to Jammy,
because the upstream ceph repository does not provide the packages
for Ubuntu Jammy yet.

Change-Id: I5549e5edea33e720a7d5cf67c3056036daca52fc

Install ruby-augeas in Debian

... because the package is available in recent stable releases[1].
This allows us to make the logic to install the package simpler.

[1]
https://packages.debian.org/stretch/ruby-augeas
https://packages.debian.org/buster/ruby-augeas
https://packages.debian.org/bullseye/ruby-augeas

Change-Id: If9c4bdbb3d8c447303adb6ddee420c12ecda4133
"
54,puppet-openstack-integration/manifests/neutron.pp,"Merge ""Remove logic for CentOS < 9""
Remove logic for CentOS < 9

... because RDO supports CentOS Stream 9 (aka CentOS 9) only since Zed.

Change-Id: Ic8f5d35aca87a5df40864aeec3b04b5ea746188c
"
55,puppet-openstack-integration/manifests/tempest.pp,"Add dns/nameservers parameter to tempest config

After [1], designate-tempest-plugin requires parameter dns.nameservers
in tempest config or it fails some jobs. This patch is setting this
parameter always to <host ip>:5322 as that is what is used when
designate is deployed in p-o-i [2].

I am not doing this parameter conditional as it will just not be used when
designate is not deployed so I guess we do not need to manage that case
separatedly.

[1] https://review.opendev.org/c/openstack/designate-tempest-plugin/+/860116
[2] https://github.com/openstack/puppet-openstack-integration/blob/master/manifests/designate.pp#L92-L97

Change-Id: I0c1fa9c4f7e00aa0c90b996d22dec8c5adef6c48
"
56,puppet-nova/manifests/api.pp,"Merge ""Clean up parameters for service validation""
Clean up parameters for service validation

... service validation was deprecated during Yoga cycle by [1].
The parameters were left for interface compatibility but have had no
effect since then.

[1] 2476bd9af54f3df68fdb57085a25d9754fff455e

Change-Id: I4acfc7e903e0666e48c49c1911e67af8ab48d425

Migrate instance_name_template to the base class

The [DEFAULT] instance_name_template parameter is used not only by
nova-api but by other services like nova-conductor or nova-compute.
This change migrate the parameter from the api class to the base class
so that users can configure the parameter for all services.

Change-Id: I0f590f12017e743a17d989d3a1008faa9b840e87
"
57,puppet-nova/manifests/init.pp,"Merge ""Support array value for console_ssl_ciphers""
Merge ""Migrate instance_name_template to the base class""
Merge ""Deprecate support for [upgrade_levels] network""
Merge ""Ensure [api] auth_strategy is wiped by default""
Support array value for console_ssl_ciphers

The [colsone] ssl_ciphers option takes a colon-separated list. This
change allows usage of a native array value to set the value so that
users can more easily compose up the value without considering
the actual value format.

Change-Id: I1a1b43f040c8acc30a85164b03312683ab9002dc

Deprecate support for [upgrade_levels] network

... because the option was deprecated several cycles ago by [1].

[1] f0d2925bc71d0649f75fd3d281742f2e56e7e3b6

Change-Id: I66527f6ef2ad547621e80ea702ef65980db77b26

Remove deprecated cinder parameters

This change removes the deprecated cinder parameters from the nova
classes, because these were all deprecated before Zed release.

This also makes the nova::cinder class removes all credential
parameters in case the password parameter is unset, because these are
useless unless the password parameter is given.

Change-Id: I4fbd1c23c1fec1310675dd69491626c0f98e3dda

Ensure [api] auth_strategy is wiped by default

... instead of leaving the parameter unmanaged.

Change-Id: Id0222c03595bdf04596cc9a5f51734460da69e62

Migrate instance_name_template to the base class

The [DEFAULT] instance_name_template parameter is used not only by
nova-api but by other services like nova-conductor or nova-compute.
This change migrate the parameter from the api class to the base class
so that users can configure the parameter for all services.

Change-Id: I0f590f12017e743a17d989d3a1008faa9b840e87
"
58,puppet-nova/manifests/params.pp,"Remove logic for CentOS < 9

... because RDO supports CentOS Stream 9 (aka CentOS 9) only since Zed.

Change-Id: I0ff6eb5da73d1be6fd8e5f1c8127f9b18116c7b9
"
59,puppet-nova/manifests/cinder.pp,"Remove deprecated cinder parameters

This change removes the deprecated cinder parameters from the nova
classes, because these were all deprecated before Zed release.

This also makes the nova::cinder class removes all credential
parameters in case the password parameter is unset, because these are
useless unless the password parameter is given.

Change-Id: I4fbd1c23c1fec1310675dd69491626c0f98e3dda
"
60,puppet-nova/manifests/compute/rbd.pp,"Ubuntu/Debian: Install qemu-block-extra when rbd backend is used

In Ubuntu Jammy, the qemu-block-extra package is no longer required by
the qemu-utils package and should be additionally installed to use rbd
backend.

Change-Id: I2ae6ed374dda55f8f68c3be5449b1fcd2a890123
"
61,puppet-nova/manifests/compute/libvirt/services.pp,"Allow customizing state of libvirt packages

... instead of hard-coding the state.

Change-Id: I4e62309109bf0889741dc2da9fcb7cd6c7ac011b
"
62,puppet-nova/manifests/compute/pci.pp,"Remove cleanup of [pci] passthrough_whitelist

This logic was added during the previous cycle[1] as part of migration
to the new [pci] device_spec parameter. The old parameter should be
removed when a deployment is upgraded to Zed so we no longer need this
beyond Zed.

[1] 502aec2406e59806d23e8d857920d5d8f2ca6cd3

Change-Id: I1e89883a9044b4d6bfd810d0a616b6a29aeff050
"
63,puppet-nova/manifests/quota.pp,"Add support for [quota] count_usage_from_placement

This change adds support for the [quota] count_usage_from_placement
option in nova.conf, which allows nova to count core/ram usage
from placement.

Change-Id: I1668efd5f9fe2509e0fcfdd431dd74c304e3d0bd
"
64,puppet-nova/manifests/compute/libvirt.pp,"Merge ""Replace redundant hard-code of [libvirt] inject_*""
Merge ""Add support for [libvirt] wait_soft_reboot_seconds""
Add support for [libvirt] wait_soft_reboot_seconds

Change-Id: I68b81ef44f3c6f6c92d9bdb2b2a18091706ff99b

Fix default value of [libvirt] file_backed_memory

... to ensure the parameter is removed from nova.conf by default.

Change-Id: Idff7de4d33c5352e994a0013a062b3e45c115d35
"
65,puppet-neutron/manifests/server.pp,"Merge ""Support [DEFAULT] l3_ha_network_* options""
Support [DEFAULT] l3_ha_network_* options

This change introduces support for a few new parameters so that users
can configure these parameters to customize the l3 ha network.

Change-Id: Ifa92f37041c76d80b74769eae06d061b546c49d8

Clean up parameter for service validation

... service validation was deprecated during Yoga cycle by [1].
The parameter was left for interface compatibility but has had no
effect since then.

[1] 35659b8d918e8e10e8dbbadf29339d04069bceb3

Change-Id: I40782633478784b599bcba9ca29b525f2b952ece
"
66,puppet-neutron/manifests/plugins/ml2/networking_ansible.pp,"Remove support for networking-ansible

We deprecated the support during Zed cycle[1], because the plugin has
been unmaintained. So now we can remove the whole implementation.

[1] f82a231bad28f8bf9c4c2b3938d99091a54cfd3a

Change-Id: I4d1509232daf18c213664545bda1d7f7aa05b93b
"
67,puppet-neutron/manifests/plugins/ml2/networking_ansible_host.pp,"Remove support for networking-ansible

We deprecated the support during Zed cycle[1], because the plugin has
been unmaintained. So now we can remove the whole implementation.

[1] f82a231bad28f8bf9c4c2b3938d99091a54cfd3a

Change-Id: I4d1509232daf18c213664545bda1d7f7aa05b93b
"
68,puppet-neutron/manifests/params.pp,"Remove support for networking-ansible

We deprecated the support during Zed cycle[1], because the plugin has
been unmaintained. So now we can remove the whole implementation.

[1] f82a231bad28f8bf9c4c2b3938d99091a54cfd3a

Change-Id: I4d1509232daf18c213664545bda1d7f7aa05b93b

Remove support for networking-vpp plugin

... because it was deprecated during Zed cycle by [1].

[1] 7a47c5a29d530982ed85e5976de7b95992b9ed93

Change-Id: I64da797bc921702f710e7328ef3e230354e2ceaf

Remove support for NSX plugin

It was deprecated during Zed cycle by [1], because the plugin is no
longer maintained.

[1] c148a64307582445f7b1b6b3ae2cee4c7c6c0ea1

Change-Id: I95feecae2e3beaed00b4a8da4c2340a0006993c8
"
69,puppet-neutron/manifests/plugins/ml2/mech_driver.pp,"Remove deprecated mech_driver defined resource type

... because it was deprecated during the previous cycle[1] and its
implementation is empty.

[1] 069b2226a9d521865725d84fe950558cb7c06036

Change-Id: Ied984b3f5e1515a4daa0c0a58bdf2b85e674f202
"
70,puppet-neutron/manifests/designate.pp,"Document default values of neutron::designate parameters

This change fixes some missing description about the default values of
the neutron::designate class parameters, and makes the description
format more consistent.

Change-Id: I88f96f6a73921907cf076a8689b4113fc2b8170b
"
71,puppet-neutron/manifests/agents/ml2/vpp.pp,"Remove support for networking-vpp plugin

... because it was deprecated during Zed cycle by [1].

[1] 7a47c5a29d530982ed85e5976de7b95992b9ed93

Change-Id: I64da797bc921702f710e7328ef3e230354e2ceaf
"
72,puppet-neutron/manifests/plugins/ml2/vpp.pp,"Remove support for networking-vpp plugin

... because it was deprecated during Zed cycle by [1].

[1] 7a47c5a29d530982ed85e5976de7b95992b9ed93

Change-Id: I64da797bc921702f710e7328ef3e230354e2ceaf
"
73,puppet-neutron/manifests/deps.pp,"Remove support for networking-vpp plugin

... because it was deprecated during Zed cycle by [1].

[1] 7a47c5a29d530982ed85e5976de7b95992b9ed93

Change-Id: I64da797bc921702f710e7328ef3e230354e2ceaf

Remove support for NSX plugin

It was deprecated during Zed cycle by [1], because the plugin is no
longer maintained.

[1] c148a64307582445f7b1b6b3ae2cee4c7c6c0ea1

Change-Id: I95feecae2e3beaed00b4a8da4c2340a0006993c8

Remove support for linuxbridge plugin config

... because it has been unused actually and was formally deprecated
during Zed cycle[1].

[1] 959c1cefeea69b65c67670b0ad44376843c9836f

Change-Id: Ie43d17c3e7d411c723986f52c4c2e1d49713711f
"
74,puppet-neutron/manifests/plugins/nsx.pp,"Remove support for NSX plugin

It was deprecated during Zed cycle by [1], because the plugin is no
longer maintained.

[1] c148a64307582445f7b1b6b3ae2cee4c7c6c0ea1

Change-Id: I95feecae2e3beaed00b4a8da4c2340a0006993c8
"
75,puppet-neutron/manifests/config.pp,"Remove support for NSX plugin

It was deprecated during Zed cycle by [1], because the plugin is no
longer maintained.

[1] c148a64307582445f7b1b6b3ae2cee4c7c6c0ea1

Change-Id: I95feecae2e3beaed00b4a8da4c2340a0006993c8

Remove support for linuxbridge plugin config

... because it has been unused actually and was formally deprecated
during Zed cycle[1].

[1] 959c1cefeea69b65c67670b0ad44376843c9836f

Change-Id: Ie43d17c3e7d411c723986f52c4c2e1d49713711f

Remove remaining parameter of the Nicira NVP plugin

This change removes the remaining parameter of NVP plugin, which was
formally deprecated during the past cycle by [1].

[1] 4117660c384e703554b80a3a0599fc1911d173f5

Change-Id: I99fa84f86d7c14b21393373d4684c24a4571d00d
"
76,puppet-neutron/manifests/plugins/ml2/opendaylight.pp,"ODL: Drop cleanup of [ovs] ovsdb_connection

... because it was added during Zed cycle[1] and the cleanup should be
done when a deployment is upgraded to Zed.

[1] d806c5a1bd3c967e59b0da245692996aef1008d4

Change-Id: Icf6c4e3c6585bfa01127695b2f00dbfb56692546
"
77,puppet-neutron/manifests/agents/ml2/mlnx.pp,"mlnx: Remove deprecated duplicate parameters

This change removes the two parameters of networking-mlnx-agent, which
were deprecated by [1] during the Zed cycle, in favor of the duplicate
parameters in the different common classes.

[1] f7b4c844bc95056d8a242332bcf60fcb5b49d8f5

Change-Id: I00cedb7a4a41333a6793d2358e64aa1ac4797fa8
"
78,puppet-neutron/manifests/agents/ovn_metadata.pp,"ovn-metadata: Remove deprecated metadata_ip

The parameter was deprecated during the previous cycle[1], because
the actual parameter in Neutron had been removed a long ago.

[1] 189d7d6bea084b0298e5490c43157018a330f5c4

Change-Id: Id07aa47e723b44d53aaac02bbdb3f0b4e8d72968
"
79,puppet-neutron/manifests/plugins/opencontrail.pp,"Contrail: Clean up deprecated parameters

This removes the parameters which were deprecated during the previous
cycle[1][2] and have had no effect since then.

[1] b35ceea55a0201fc59dc986e444593c4fbe37d70
[2] 766570bd5a38832181dce79a16920e63a2dff6ec

Change-Id: I48b9557e2552f12c25ce8149d92978394d0cc249
"
80,puppet-keystone/manifests/init.pp,"Fix wrong indent

Trivial-Fix

Change-Id: I79e39b43baa5963e13a4fda404244e6787980f9e

Remove deprecated parameters for [ssl] options

These parameters were deprecated during the previous cycle[1].

[1] 0954fea1d6b556681bb81d5d854b2f60a11b737d

Change-Id: I67755c4181868e137928f9444fae4be09f511c36

Remove deprecated keystone::log_* parameters

These parmaeters have had no effect for a while and were deprecated
formally during the previous cycle[1].

[1] 1f13f9ed6b26b2d408371c31c41a1b82d9a6ab6b

Change-Id: Iff34bd86a92d4f92ea46115889f83e37b68aba31

Remove warning message for old change

This removes the warning message added to inform the old change which
was merged multiple cycles ago[1], because we can safely assume users
are aware of this change.

[1] 3c08645ba8b894d3adce3d65464dd43a0a33ce55

Change-Id: Ifca8a60409093b31f780c6a47a9cce0f9635286e

Debian: Ensure keystone service is stopped when httpd is used

This change fixes the missing logic to ensure the standalone keystone
service is stopped when httpd + mod_wsgi is used to run the keystone
service.

Change-Id: I3ae6b9192c3c3d15fbf25be5d276efbcf2e9639b
"
81,puppet-keystone/manifests/service.pp,"Remove deprecated keystone::service

This defined resource type was deprecated during the past cycle[1] and
can be removed.

[1] 05c5605e98fcc0da33386065c2c315d69103b891

Change-Id: Ib4c7565462e32be2d4dab4b0c538410ad98aefaf
"
82,puppet-keystone/manifests/deps.pp,"Remove keystone_puppet_config resource type

This is no longer used since we replaced the configuration file by
clouds.yaml. The resource was already deprecated by [1] in the past
cycle so can be removed.

[1] c140a44aebb271558c81e528aba8b6dcb4989a62

Change-Id: I631c0a14cc0ee5b56e7864980da9a651d6bf7d9b
"
83,puppet-keystone/manifests/wsgi/apache.pp,"Make WSGI process display-name configurable

Change-Id: I3bfbd0283d1e9005719085d86cd00729c9002c43

Fix inconsistent port parameter name

The keystone::wsgi::apache class takes the api_port parameter but
the other modules uses the port parameter instead.

This change fixes the inconsistent interface.

Change-Id: Ib6a643eedbb2ecd5050c10cc5ae98ffaabb441f5

Fix dependency to purge default vhost config

It turned out defining dependency for openstacklib::wsgi::apache
doesn't properly enforce resource order and the default vhost file
is not purged properly.
This change adds the more explicit dependency to enforce the order
properly.

Change-Id: I2a01de89c43000bfc6f24dfc756806b968b5efd6

Merge ""Adapt to new type validation in puppetlabs-apache""
Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: Ic9cf630f6f1a8907e069ed10728f2a8c50b75d79
"
84,puppet-keystone/manifests/healthcheck.pp,"Fix a typo in parameter description

Change-Id: I9bc9f94f157bf991b174cbfc9f2d369d35d3371c
"
85,puppet-keystone/manifests/cron/trust_flush.pp,"Allow customizing --date option for trust_flush cron job

This change introduces the new age parameter so that --date options is
enabled when running the trust_flush cron job.

Change-Id: I7d4a5a08c73683fff8fd270e5bc991531f8dda48
"
86,puppet-keystone/manifests/bootstrap.pp,"Remove old puppet.conf resource in bootstrap class

This is no longer used and can thus be removed.

Change-Id: If7aa3781c0cfc44c1744e4d7f5ba235ed5eb0054
"
87,puppet-cinder/manifests/backend/netapp.pp,"NetApp: Deprecate support for netapp_copyoffload_tool_path

... because the parameter was already deprecated in cinder.

Depends-on: https://review.opendev.org/c/openstack/cinder/+/847733
Change-Id: I9ebb3f6a214222457547f687c6f3abd2b9c058fb
"
88,puppet-cinder/manifests/api.pp,"Clean up parameter for service validation

... service validation was deprecated during Yoga cycle by [1].
The parameter was left for interface compatibility but has had no
effect since then.

[1] d944a76b95fb82fe161159954f3dfe720726bcfc

Change-Id: I16936b092df46c689813b80557e24542b7d43093
"
89,puppet-cinder/manifests/backend/nfs.pp,"NFS driver: Remove deprecated nfs_disk_util

The parameter was deprecated during the previous cycle[1] and has had
no effect since then.

[1] eb3361bc9981a6e3a50bc9ac9ec53f76bf140743

Change-Id: I3632a55f8f75873f1a9178bf42bac1f6c97d3c24
"
90,puppet-cinder/manifests/backend/ibm_svf.pp,"Support for Cinder IBM Svf driver

This patch adds support for Cinder IBM Spectrum virtualize family (Svf)
driver.

Change-Id: I43f954879de6ce70237cb468e7ef1fbc2649edcd
"
91,puppet-cinder/manifests/init.pp,"Clean up enable_v3_api parameter

... because it was deprecated during Yoga cycle[1].
The actual parameter was already removed from cinder by [2].

[1] 40885d15bb92faa3e3902e7505da24c5e7c5fc5e
[2] 81831c915aff5f83741968b758934abcef92b0e9

Change-Id: I61a44e878129dbd1df08bd19fe38040215606635

Support [DEFAULT] image_conversion_disable

... which was added during Zed cycle.

Depends-on: https://review.opendev.org/839793
Related-Bug: #1970115
Change-Id: I0be505b76da7bf40ffd8fe990cdea08c7839f747

Support more customization of image conversion

This change introduces a few new parameters to allow users to customize
behavior of image conversion process in Cinder.

Change-Id: Ic94bfaee69c7eab3c3d8e00157ef29cfa9a72963

Remove old description about volume_tmp_dir

The cinder::backend::rbd::volume_tmp_dir parameter was removed several
cycles ago[1] and has been completely replaced. The current description
is bit confusing because the old parameter no longer exists.

[1] 5c5a7dbf95650ff476604d369bfc197a757beab8

Change-Id: I5e724ffcb7b60ed154abae32c93256cde6e80493
"
92,puppet-cinder/manifests/setup_test_volume.pp,"Prepare to replicate lvm setup functionality

This is the preparation work to replicate the functionality to create
volume group to puppet-manila.

Change-Id: I2473eba3c463828ad5036ebd52e192cd14b75b68

Fix detection of existing PV

Existing PV should be detected by the physical device name, not by
the volume group name. This also simplifies the command to determine
whether the VG exists.

Change-Id: I8d694d8127cf5cfb1e2a6525599616a2c2f9934d

Ensure lvm setup is completed before starting services

The lvm setup process should be completed before cinder-volume starts,
otherwise cinder-volume fails to initialize the backend and the service
status remains down until the cinder-volume service is restarted.

Change-Id: Icd8401d8a1bfaf5bd4b235c177711a0afcab5e55
"
93,puppet-cinder/manifests/wsgi/apache.pp,"Use standard parameter description format for wsgi::apache

Currently parameter description of the <module>::wsgi::apache classes
are formatted differently in individual modules, and this is making
the maintenance effort quite difficult.

This change updates the description format following the srandard one
we are globally using in our modules to reduce undesired differences
between modules.

Change-Id: I7c8cfb2cf7303fcb280e411276cf121bd1c9a74b
"
94,puppet-cinder/manifests/backup/swift.pp,"Add support for [DEFAULT] backup_swift_service_auth

This change introduces support for [DEFAULT] backup_swift_service_auth
which was recently added to the swift backup driver.

Depends-on: https://review.opendev.org/c/openstack/cinder/+/840289
Change-Id: I32b19f298311266e913507661dbe2a65e0cfe5f0
"
95,puppet-ironic/manifests/drivers/agent.pp,"Add support for [agent] command_wait_* options

... so that users can tune how asynchronous commands completion is
handled.

Change-Id: I9c84ea89ed6a1844b9facf95bd405ba51790401c
"
96,puppet-ironic/manifests/params.pp,"Remove logic for CentOS < 9

... because RDO supports CentOS Stream 9 (aka CentOS 9) only since Zed.

Change-Id: I7514c4384a15b235a54f1c310f6d0167089e0515
"
97,puppet-ironic/manifests/pxe.pp,"Merge ""pxe: Allow disabling http server""
pxe: Add option to determine status of dnsmasq tftp server

... so that all classes with service resources provide the consistent
capability.

Change-Id: Ic2f5d5140320f1a5921d5fa4984e6a8773aa304f

Add manage_service parameter

... so that users can disable service management by Puppet. The same
functionality is already implemented in the other modules.

Change-Id: If08149ebd7b40b106327d5363f6b28e51176510e

pxe: Allow disabling http server

This change introduces a new option to disable resources to set up http
server for ipxe boot. This is useful, when ipxe boot interface is not
used or users have their own external tooling to maintain the http
server.

Change-Id: Ic767795442ee68ce8dda6bc8b53493ac17f6f40c

Merge ""Fix type validation error with puppetlabs-apache 8.0.0""
Fix type validation error with puppetlabs-apache 8.0.0

This is follow-up of 11c3e1acad2db20ce9e2a959eba6211bef1e17b3 and fixes
type validation error of apache::vhost::port, which now accepts only
an integer value.

Related-Bug: #1983300
Change-Id: I8594d5857c54a860cdbb740acb63b5104a29c655

Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: Idde8d7201d36f07f200e06781b331ebe75c0d7b3

Merge ""Get rid of unnecessary ensure_resource"""
98,puppet-ironic/manifests/api.pp,"Add manage_service parameter

... so that users can disable service management by Puppet. The same
functionality is already implemented in the other modules.

Change-Id: If08149ebd7b40b106327d5363f6b28e51176510e
"
99,puppet-ironic/manifests/conductor.pp,"Add manage_service parameter

... so that users can disable service management by Puppet. The same
functionality is already implemented in the other modules.

Change-Id: If08149ebd7b40b106327d5363f6b28e51176510e

conductor: Support tuning of heartbeats

This change adds support for the following parameters so that users can
tune heart beats in the ironic-conductor service.

- [conductor] heartbeat_interval
- [conductor] heartbeat_timeout

Depends-on: https://review.opendev.org/850298
Change-Id: Ic4ceaf703b897c7266d802f5394ae065ef2d11a1

Add deploy_callback_timeout parameter

Change-Id: I30fef88b425c2729acf860d489e9fb6a493c5a4e
"
100,puppet-ironic/manifests/inspector.pp,"Add manage_service parameter

... so that users can disable service management by Puppet. The same
functionality is already implemented in the other modules.

Change-Id: If08149ebd7b40b106327d5363f6b28e51176510e
"
101,puppet-ironic/manifests/wsgi/apache.pp,"Use standard parameter description format for wsgi::apache

Currently parameter description of the <module>::wsgi::apache classes
are formatted differently in individual modules, and this is making
the maintenance effort quite difficult.

This change updates the description format following the standard one
we are globally using in our modules to reduce undesired differences
between modules.

Change-Id: I573b1d656268ea7004c16a571afca6489893f0f5

Add Apache WSGI logging parameters for pipe/syslog

Add parameters for advanced logging configurations in Apache to
support piped logging and support for syslog (via mod_syslog
available in Apache >= 2.5.0)

Co-Authored-By: Andy Botting <andy@andybotting.com>
Change-Id: I55f899284edfe15c177e5253bb3e278d73955fe9

Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: Idde8d7201d36f07f200e06781b331ebe75c0d7b3
"
102,puppet-swift/manifests/storage/node.pp,"Format IPv6 address for ring device

The IPv6 addresses in ring_*_device resource names should be surrounded
by []. This ensures the address is properly formatted when the resource
is define in swift::storage::node.

Closes-Bug: #1997295
Change-Id: I390f3c7bbfbbbc7217f81e8a0312e5db201ef409
"
103,puppet-swift/manifests/params.pp,"Remove logic for CentOS < 9

... because RDO supports CentOS Stream 9 (aka CentOS 9) only since Zed.

Change-Id: I9f1faaaf8481da40992e5ccf3cc0c7a66f4811ea
"
104,puppet-swift/manifests/storage/disk.pp,"Restrict access to the mount base directory

The swift processes does not require write access to the mount base
directory (which is usually /srv/node), thus the directory can be owned
by root. This is more consistent with the current installation guide
of Swift.

Change-Id: I6da122c569e7a66a1933b7483fb8cf68a40dd94f
"
105,puppet-swift/manifests/storage/loopback.pp,"Restrict access to the mount base directory

The swift processes does not require write access to the mount base
directory (which is usually /srv/node), thus the directory can be owned
by root. This is more consistent with the current installation guide
of Swift.

Change-Id: I6da122c569e7a66a1933b7483fb8cf68a40dd94f
"
106,puppet-swift/manifests/storage/xfs.pp,"Restrict access to the mount base directory

The swift processes does not require write access to the mount base
directory (which is usually /srv/node), thus the directory can be owned
by root. This is more consistent with the current installation guide
of Swift.

Change-Id: I6da122c569e7a66a1933b7483fb8cf68a40dd94f
"
107,puppet-swift/manifests/storage/mount.pp,"Prohibit write to the mount directory

This change makes the root user, instead of the swift user, own
the mount path where the data disk is mounted. This allows us to
prevent the swift processes from writing files.

This follows the current installation doc(eg. [1]) which suggests
chown AFTER mounting the disk device.

[1] https://docs.openstack.org/swift/latest/install/storage-install-rdo.html

Change-Id: I1a612fcf658da8ed0cb1dc51fa5e534dc0341241
"
108,puppet-swift/manifests/proxy/authtoken.pp,"authtoken: Remove deprecated auth_plugin

The parameter was deprecated during Victoria cycle[1] in favor of
the auth_type parameter.

[1] 5722f7149c678fcb79cf792a9eda53537e080cb8

Change-Id: Ibc261c2e2ba9fa9ba547ad5d0f736c1b7230c579

Merge ""authtoken: Accept array for service_token_roles""
authtoken: Accept array for service_token_roles

... because the parameter is ListOpt.

Change-Id: Ic436aeb90c3e592895112320e4342c0ad3d018ff
"
109,puppet-glance/manifests/api.pp,"Remove parameters for native ssl support

These parameters were deprecated during the previous cycle by [1] and
have had no effect. These parameters are not really used by recent
glance.

[1] 2a2f349d8a1f0426f77bdbea6c70a316b4c3daa0

Depends-on: https://review.opendev.org/865924
Related-Bug: #1965776
Change-Id: Ia24b57966f6d8aee5cfa56cfe3496f1d81924ea1

Merge ""Deprecate support for [DEFAULT] cache_prefetcher_interval""
Deprecate support for [DEFAULT] cache_prefetcher_interval

... because the parameter was already removed from Glance.

Depends-on: https://review.opendev.org/c/openstack/glance/+/842070
Change-Id: I6a8029e9f85ef0511fe52292901fc66fc437b57b

Add new option for api: public_endpoint

When running glance-api behind a proxy or load balancer that hides
glance behind an extended base URL, it is necessary to provide
information about the base URL to glance-api to ensure that clients
know where to pass subsequent requests.

Change-Id: I9bebee01c2580f0500a069f5ab57ac2a8c329389

Remove deprecated keymgr_* parameters

These were deprecated during Xena cycle in favor of the new separate
classes to customize key manager[1].

[1] bc7651fa5f7d622616c8634a55c9339306583c23

Change-Id: Id3395fd58cbdd7e686a08c8369cd38c3e322628b

Remove deprecated glance::os_region_name

It was deprecated during Ussuri cycle by [1].

[1] 9e82f598ad86d99a5bc356ba5c118a52a1d5d9bc

Change-Id: Iab8fe79beedbe8cae0a5e6f6bd7c8a0b2d1e74c0
"
110,puppet-glance/manifests/backend/multistore/rbd.pp,"Install python-ceph/rbd before starting glance services

The python-ceph/rbd package is required so that glance services can
access to its ceph backend. This change ensures the package resource
is tagged with the glance-support-package tag so that the package is
always installed before starting glance services.

Change-Id: I0df179dccc95fd4d617eb1b39d921ecc4a6d7bee
"
111,puppet-glance/manifests/wsgi/apache.pp,"Merge ""Fix dependency to purge default vhost config""
Merge ""Remove redundant class inclusion""
Fix dependency to purge default vhost config

It turned out defining dependency for openstacklib::wsgi::apache
doesn't properly enforce resource order and the default vhost file
is not purged properly.
This change adds the more explicit dependency to enforce the order
properly.

Change-Id: I3c9afa0d9b0ef37ab56dd17136e4700b914de501

Use standard parameter description format for wsgi::apache

Currently parameter description of the <module>::wsgi::apache classes
are formatted differently in individual modules, and this is making
the maintenance effort quite difficult.

This change updates the description format following the standard one
we are globally using in our modules to reduce undesired differences
between modules.

Change-Id: Ic19381c0beeca3c7b62db6345157cd6aab5b3105

Remove redundant class inclusion

The apache class is already included by the openstacklib::wsgi::apache
defined types and the apache::wsgi class and the apache::ssl class is
automatically included by the apache::vhost defined type.

This removes the redundant inclusion of these classes.

Change-Id: If132d46ec1929ed56e16a9b615010ea0535282ba

apache::vhost::priority should be Integer

This change fixes the left over of [1] and makes sure the priority
parameter is an integer value, according to the type validation in
puppetlabs-apache 8.0.0 .

[1] 23584e89becb3920287c8dc2effb2d76c666f623

Related-Bug: #1983300
Change-Id: I6a47f32dbfc8a6c10bc9535d1208bf16a8470a08
"
112,puppet-glance/manifests/key_manager.pp,"Remove deprecated keymgr_* parameters

These were deprecated during Xena cycle in favor of the new separate
classes to customize key manager[1].

[1] bc7651fa5f7d622616c8634a55c9339306583c23

Change-Id: Id3395fd58cbdd7e686a08c8369cd38c3e322628b
"
113,puppet-glance/manifests/key_manager/barbican.pp,"Remove deprecated keymgr_* parameters

These were deprecated during Xena cycle in favor of the new separate
classes to customize key manager[1].

[1] bc7651fa5f7d622616c8634a55c9339306583c23

Change-Id: Id3395fd58cbdd7e686a08c8369cd38c3e322628b
"
114,puppet-glance/manifests/backend/cinder.pp,"Remove deprecated glance::os_region_name

It was deprecated during Ussuri cycle by [1].

[1] 9e82f598ad86d99a5bc356ba5c118a52a1d5d9bc

Change-Id: Iab8fe79beedbe8cae0a5e6f6bd7c8a0b2d1e74c0
"
115,puppet-glance/manifests/backend/multistore/cinder.pp,"Remove deprecated glance::os_region_name

It was deprecated during Ussuri cycle by [1].

[1] 9e82f598ad86d99a5bc356ba5c118a52a1d5d9bc

Change-Id: Iab8fe79beedbe8cae0a5e6f6bd7c8a0b2d1e74c0
"
116,puppet-glance/manifests/notify/rabbitmq.pp,"Remove deprecated rabbit_notification_exchange parameter

This parameter was deprecated during Yoga cycle[1] because it has been
invalid.

[1] 8bb784d524b90b9d9b69a89b1b39762ea669745b

Related-Bug: #1955510
Change-Id: I412625e9c741a20c3661f6a2ae17b6e16788b60a
"
117,puppet-ceilometer/manifests/db.pp,"Remove implementations to set up Ceilometer DB

Ceilometer no longer requires its own database since metric/event
storage was offloaded to Gnocchi/Panko. These implementations were
formally deprecated during the previous cycle[1] so can be removed.

This also updates the outdated example manifests to adapt to
the removal and the recent refactoring.

[1] 60882c29dff6b5302d982eaf79796913c4a8bea9

Change-Id: Id18b9221703eda9311b81c5a5dfdd41cc68f5424

Deprecate classes to set up Ceilometer DB

Since metric/event storage was offloaded to Gnocchi/Panko, ceilometer
no longer requires its own backend storage.

Change-Id: Idf9904e7e8f1b5eca3f25cd37fb83e9adbca0995
"
118,puppet-ceilometer/manifests/db/mysql.pp,"Remove implementations to set up Ceilometer DB

Ceilometer no longer requires its own database since metric/event
storage was offloaded to Gnocchi/Panko. These implementations were
formally deprecated during the previous cycle[1] so can be removed.

This also updates the outdated example manifests to adapt to
the removal and the recent refactoring.

[1] 60882c29dff6b5302d982eaf79796913c4a8bea9

Change-Id: Id18b9221703eda9311b81c5a5dfdd41cc68f5424

Deprecate classes to set up Ceilometer DB

Since metric/event storage was offloaded to Gnocchi/Panko, ceilometer
no longer requires its own backend storage.

Change-Id: Idf9904e7e8f1b5eca3f25cd37fb83e9adbca0995
"
119,puppet-ceilometer/manifests/db/postgresql.pp,"Remove implementations to set up Ceilometer DB

Ceilometer no longer requires its own database since metric/event
storage was offloaded to Gnocchi/Panko. These implementations were
formally deprecated during the previous cycle[1] so can be removed.

This also updates the outdated example manifests to adapt to
the removal and the recent refactoring.

[1] 60882c29dff6b5302d982eaf79796913c4a8bea9

Change-Id: Id18b9221703eda9311b81c5a5dfdd41cc68f5424

Deprecate classes to set up Ceilometer DB

Since metric/event storage was offloaded to Gnocchi/Panko, ceilometer
no longer requires its own backend storage.

Change-Id: Idf9904e7e8f1b5eca3f25cd37fb83e9adbca0995
"
120,puppet-ceilometer/examples/ceilometer_with_gnocchi.pp,"Remove implementations to set up Ceilometer DB

Ceilometer no longer requires its own database since metric/event
storage was offloaded to Gnocchi/Panko. These implementations were
formally deprecated during the previous cycle[1] so can be removed.

This also updates the outdated example manifests to adapt to
the removal and the recent refactoring.

[1] 60882c29dff6b5302d982eaf79796913c4a8bea9

Change-Id: Id18b9221703eda9311b81c5a5dfdd41cc68f5424
"
121,puppet-ceilometer/examples/site.pp,"Remove implementations to set up Ceilometer DB

Ceilometer no longer requires its own database since metric/event
storage was offloaded to Gnocchi/Panko. These implementations were
formally deprecated during the previous cycle[1] so can be removed.

This also updates the outdated example manifests to adapt to
the removal and the recent refactoring.

[1] 60882c29dff6b5302d982eaf79796913c4a8bea9

Change-Id: Id18b9221703eda9311b81c5a5dfdd41cc68f5424
"
122,puppet-ceilometer/manifests/deps.pp,"Remove implementations to set up Ceilometer DB

Ceilometer no longer requires its own database since metric/event
storage was offloaded to Gnocchi/Panko. These implementations were
formally deprecated during the previous cycle[1] so can be removed.

This also updates the outdated example manifests to adapt to
the removal and the recent refactoring.

[1] 60882c29dff6b5302d982eaf79796913c4a8bea9

Change-Id: Id18b9221703eda9311b81c5a5dfdd41cc68f5424
"
123,puppet-ceilometer/manifests/init.pp,"Remove parameters for [hardware] options

... because these parameters were deprecated during the previous
cycle[1] and the feature has been removed from Ceilometer already.

[1] e5ce40b16d7534a917416cb2e5f3669336fc816f

Change-Id: Ibaba550aa9a13c7b1afb62970e391c1d4beb2f08

Forcefully purge [hardware] readonly_user_* parameters

This is follow-up of e5ce40b16d7534a917416cb2e5f3669336fc816f and now
enforces that the parameters are removed from ceilometer.conf because
these were already removed from ceilometer and no longer used.

Depends-on: https://review.opendev.org/840808
Change-Id: I4d9196133ead84d4b388929231ce970882fcaaa6

Clean up deprecated cache parameters

These parameters were deprecated during Yoga cycle[1].

[1] a7cf7060ddfeab7440bf2e84522d220014c10bd8

Change-Id: I0358678a9298dfceb9c4ebf918ef334f0f5e496d

Fix typos in parameter descriptions and tests

Change-Id: Id17358fce48468284f162a6de35840d439871cd5

Refactor service user/group management

This change refactors how the ceilometer service user and group are
managed.

- The ceilometer service user and group are created by the common
  package. While the user resource should still be declared to manage
  its group membership, we don't need the group resource.

- Introduces the configuration knob to disable user/group management.
  This would be useful in the case where all service users are
  declared externally.

Change-Id: Iaabe5b02f0ebd782debd0f3ca41e2fdafbf9c80f

Deprecate support for [hardware] options

... because these options were deprecated during the Yoga cycle when
GenericHardwareDeclarativePollster was deprecated[1].

[1] d10f6ca32fd9dfe5100cb54531adb4bba866edf8

Change-Id: I2bf6423d54234822b05a1a22f3cc29d0f7a3c1e7
"
124,puppet-ceilometer/manifests/agent/polling.pp,"Add new parameter `tenant_name_discovery`

Enabling this parameter will identify user and project
names from the polled metrics [1].

These details are collected by making additional requests
to keystone service, depending upon the scale of environment,
number of projects/users and the count of metrics polled in
every iteration, enabling this could overwhelm the keystone
service.

[1] Iee5dbf09a1fd3ac571746fc66d2683eb8e6a1b27

Depends-on: https://review.opendev.org/852948
Signed-off-by: Yadnesh Kulkarni <ykulkarn@redhat.com>
Change-Id: I045c7cd7a86d0f7f97a9078cbfc74353dcff0eb8

Remove deprecated ceilometer::agent::polling::coordination_url

... because it was deprecated during Xena cycle[1] in favor of the new
ceilometer::coordination class.

[1] 1155b41db051e95e9246aa02eed2205f1f0f845a

Change-Id: I0885b79bd83bcc3b41b8da0bd0fd00f29d176f13

Refactor service user/group management

This change refactors how the ceilometer service user and group are
managed.

- The ceilometer service user and group are created by the common
  package. While the user resource should still be declared to manage
  its group membership, we don't need the group resource.

- Introduces the configuration knob to disable user/group management.
  This would be useful in the case where all service users are
  declared externally.

Change-Id: Iaabe5b02f0ebd782debd0f3ca41e2fdafbf9c80f

polling: Ensure unused parameters are cleared

... instead of leaving the parameters unmanaged.

Change-Id: I0eeb25b131385ad4448fc8cec04efbdce0b7d87a
"
125,puppet-ceilometer/manifests/agent/notification.pp,"Remove deprecated notificaton_workers

... because the parameter was deprecated during Wallaby cycle[1] in
favor of the new workers parameter.

[1] 15921006c595ff705be40c02d324a387c92a4339

Change-Id: I787bbe850cfcca737b9ad9de5db676b868549f2e
"
126,puppet-ceilometer/manifests/coordination.pp,"Remove deprecated ceilometer::agent::polling::coordination_url

... because it was deprecated during Xena cycle[1] in favor of the new
ceilometer::coordination class.

[1] 1155b41db051e95e9246aa02eed2205f1f0f845a

Change-Id: I0885b79bd83bcc3b41b8da0bd0fd00f29d176f13
"
127,puppet-ceilometer/manifests/cache.pp,"Clean up deprecated cache parameters

These parameters were deprecated during Yoga cycle[1].

[1] a7cf7060ddfeab7440bf2e84522d220014c10bd8

Change-Id: I0358678a9298dfceb9c4ebf918ef334f0f5e496d

Fix typos in parameter descriptions and tests

Change-Id: Id17358fce48468284f162a6de35840d439871cd5
"
128,puppet-ceilometer/manifests/keystone/auth.pp,"Fix typos in parameter descriptions and tests

Change-Id: Id17358fce48468284f162a6de35840d439871cd5
"
129,puppet-octavia/manifests/controller.pp,"Add support for [controller_worker] amphora_delete_* options

... so that users can tune these options using the native class
parameters.

Change-Id: I13fb52a3f8e0e3237013da2c42c7b8baf322a006

Merge ""Allow (more) customization of amphora log offloading"""
130,puppet-octavia/manifests/worker.pp,"Drop redundant class inclusion check

The include function should be handle the case when the class is
already included in the catalog, and it does not fail in case the class
is already included by resource-like declaration.

Change-Id: Iae52c40aba07cf2cba49bca885bbaa33f8451ccf

Support customizing ssh key type

This change introduces a few new parameters to customize type of
the ssh key automatically generated. This is required especially in
recent operating systems like CentOS 9 which no longer allow RSA key
by default.

Closes-Bug: #1986651
Change-Id: I73f8b584ac228a0ba65b531c2e8d9f6495d63ad2
"
131,puppet-octavia/manifests/health_manager.pp,"Add health_manager::failover_threshold parameter

This parameter was added in Zed as part of the Failover stop threshold
feature [0]

[0] https://review.opendev.org/c/openstack/octavia/+/656811

Change-Id: I637e89a794203c393c50728b42666a0d2a104849

Validate octavia::health_manager:heartbeat_key only if it is set

... to avoid the following warning.

validate_legacy(validate_string) expects a String value, got Undef
at [...]

This also fixes the wrong logic to detect usage of the deprecated
heartbeat_interval parameter.

Change-Id: Ic914e3164ea648e502ce51d213e1f3f9962dcb9c
"
132,puppet-octavia/manifests/wsgi/apache.pp,"Use standard parameter description format for wsgi::apache

Currently parameter description of the <module>::wsgi::apache classes
are formatted differently in individual modules, and this is making
the maintenance effort quite difficult.

This change updates the description format following the srandard one
we are globally using in our modules to reduce undesired differences
between modules.

Change-Id: I620b9cea87b3bde5777dc8e83e9d8a57440f00b1

Add Apache WSGI logging parameters for pipe/syslog

Add parameters for advanced logging configurations in Apache to
support piped logging and support for syslog (via mod_syslog
available in Apache >= 2.5.0)

Co-Authored-By: Andy Botting <andy@andybotting.com>
Change-Id: I1c4a1af57f090cfd0d2edeca897ee23e50203d12

Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: I9e66709c40d1c1d1bd1419e92544e005fdb8f7ef
"
133,puppet-octavia/manifests/audit.pp,"Add support for audit middleware options

Change-Id: Ic65828ddf8a8631e5ce1db56cd50aeda3eeb9656
"
134,puppet-heat/examples/site.pp,"Fix usage of non-existing parameter in example

The heat::sql_database parameter no longer exists.

Change-Id: I066634fe94cfe2503a0c5fc8ed6ac3dae374f427
"
135,puppet-heat/manifests/wsgi/apache.pp,"Use standard parameter description format for wsgi::apache

Currently parameter description of the <module>::wsgi::apache classes
are formatted differently in individual modules, and this is making
the maintenance effort quite difficult.

This change updates the description format following the standard one
we are globally using in our modules to reduce undesired differences
between modules.

Change-Id: Icec870fce75185f2ca902c565dd94c467b9f6638

Add Apache WSGI logging parameters for pipe/syslog

Add parameters for advanced logging configurations in Apache to
support piped logging and support for syslog (via mod_syslog
available in Apache >= 2.5.0)

Co-Authored-By: Andy Botting <andy@andybotting.com>
Change-Id: Idb3d73309588a7436cd2e067121119c5878eee18

Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: I2df44be85cb73144ce45b8f5bea2ccba64d0be86

Merge ""Expose headers option of apache::vhost""
Expose headers option of apache::vhost

The headers option in apache::vhost is required in some case, for
example when adding the X-XSS-Protection header. This change allows
customizing the option for the api vhost.

Change-Id: I2c527b5511db04f9daa7f605b565a567599b5431

Fix typos in parameter descriptions and tests

Change-Id: I4b368e030e207beabb1d69b9c5079d34aa494856

apache+mod_wsgi: Disable SSL by default

During the previous cycle, a warning message was added to inform users
of this change.

Now the default value is updated so that SSL is disabled by default.

Change-Id: I6bd11a340b8623b45da7284e52ee505ea6870562
"
136,puppet-heat/manifests/wsgi/apache_api.pp,"Use standard parameter description format for wsgi::apache

Currently parameter description of the <module>::wsgi::apache classes
are formatted differently in individual modules, and this is making
the maintenance effort quite difficult.

This change updates the description format following the standard one
we are globally using in our modules to reduce undesired differences
between modules.

Change-Id: Icec870fce75185f2ca902c565dd94c467b9f6638

Add Apache WSGI logging parameters for pipe/syslog

Add parameters for advanced logging configurations in Apache to
support piped logging and support for syslog (via mod_syslog
available in Apache >= 2.5.0)

Co-Authored-By: Andy Botting <andy@andybotting.com>
Change-Id: Idb3d73309588a7436cd2e067121119c5878eee18

Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: I2df44be85cb73144ce45b8f5bea2ccba64d0be86

Merge ""Expose headers option of apache::vhost""
Expose headers option of apache::vhost

The headers option in apache::vhost is required in some case, for
example when adding the X-XSS-Protection header. This change allows
customizing the option for the api vhost.

Change-Id: I2c527b5511db04f9daa7f605b565a567599b5431

Fix typos in parameter descriptions and tests

Change-Id: I4b368e030e207beabb1d69b9c5079d34aa494856

apache+mod_wsgi: Disable SSL by default

During the previous cycle, a warning message was added to inform users
of this change.

Now the default value is updated so that SSL is disabled by default.

Change-Id: I6bd11a340b8623b45da7284e52ee505ea6870562
"
137,puppet-heat/manifests/wsgi/apache_api_cfn.pp,"Use standard parameter description format for wsgi::apache

Currently parameter description of the <module>::wsgi::apache classes
are formatted differently in individual modules, and this is making
the maintenance effort quite difficult.

This change updates the description format following the standard one
we are globally using in our modules to reduce undesired differences
between modules.

Change-Id: Icec870fce75185f2ca902c565dd94c467b9f6638

Add Apache WSGI logging parameters for pipe/syslog

Add parameters for advanced logging configurations in Apache to
support piped logging and support for syslog (via mod_syslog
available in Apache >= 2.5.0)

Co-Authored-By: Andy Botting <andy@andybotting.com>
Change-Id: Idb3d73309588a7436cd2e067121119c5878eee18

Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: I2df44be85cb73144ce45b8f5bea2ccba64d0be86

Merge ""Expose headers option of apache::vhost""
Expose headers option of apache::vhost

The headers option in apache::vhost is required in some case, for
example when adding the X-XSS-Protection header. This change allows
customizing the option for the api vhost.

Change-Id: I2c527b5511db04f9daa7f605b565a567599b5431

Fix typos in parameter descriptions and tests

Change-Id: I4b368e030e207beabb1d69b9c5079d34aa494856

apache+mod_wsgi: Disable SSL by default

During the previous cycle, a warning message was added to inform users
of this change.

Now the default value is updated so that SSL is disabled by default.

Change-Id: I6bd11a340b8623b45da7284e52ee505ea6870562
"
138,puppet-heat/manifests/cache.pp,"Fix typos in parameter descriptions and tests

Change-Id: I4b368e030e207beabb1d69b9c5079d34aa494856
"
139,puppet-heat/manifests/healthcheck.pp,"Fix typos in parameter descriptions and tests

Change-Id: I4b368e030e207beabb1d69b9c5079d34aa494856
"
140,puppet-heat/manifests/init.pp,"Fix typos in parameter descriptions and tests

Change-Id: I4b368e030e207beabb1d69b9c5079d34aa494856

Remove deprecated heat::max_stack_per_tenant

... because it was deprecated during Xena cycle by [1].

[1] e79e74cd089622bc33ebcc0ceb2bb17c398e216f

Change-Id: I3806ab51e6593a9e00172af6b1eb02d9812fcf72

Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
141,puppet-heat/manifests/logging.pp,"Fix typos in parameter descriptions and tests

Change-Id: I4b368e030e207beabb1d69b9c5079d34aa494856
"
142,puppet-heat/manifests/engine.pp,"Ensure [DEFAULT] deferred_auth_method is purged

... instead of left unmanaged. The parameter was deprecated a while ago
but is still valid in Heat.

Change-Id: I13c7c869855c60c9db1ca57772a2c0989b511e94

Remove deprecated heat::max_stack_per_tenant

... because it was deprecated during Xena cycle by [1].

[1] e79e74cd089622bc33ebcc0ceb2bb17c398e216f

Change-Id: I3806ab51e6593a9e00172af6b1eb02d9812fcf72
"
143,puppet-heat/manifests/cron/purge_deleted.pp,"Support tuning batch size of DB purge operation

The heat-manage purge_deleted command supports customizing batch size,
number of stacks to delete by a single transaction. This change adds
the new parameter to customize the parameter.

Change-Id: Id980c6f975f22baa305d3cd84378c98b3e9f84f2
"
144,puppet-heat/manifests/clients.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
145,puppet-heat/manifests/clients/aodh.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
146,puppet-heat/manifests/clients/barbican.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
147,puppet-heat/manifests/clients/base.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
148,puppet-heat/manifests/clients/cinder.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
149,puppet-heat/manifests/clients/designate.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
150,puppet-heat/manifests/clients/glance.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
151,puppet-heat/manifests/clients/heat.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
152,puppet-heat/manifests/clients/keystone.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
153,puppet-heat/manifests/clients/magnum.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
154,puppet-heat/manifests/clients/manila.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
155,puppet-heat/manifests/clients/mistral.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
156,puppet-heat/manifests/clients/neutron.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
157,puppet-heat/manifests/clients/nova.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
158,puppet-heat/manifests/clients/octavia.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
159,puppet-heat/manifests/clients/sahara.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
160,puppet-heat/manifests/clients/swift.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
161,puppet-heat/manifests/clients/trove.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
162,puppet-heat/manifests/clients/vitrage.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
163,puppet-heat/manifests/clients/zaqar.pp,"Support more clients configurations

This change introduces support for [clients] parameters and
[clients_<service>] parameters, which determine behavior of service
clients used by heat for communication with the OpenStack services.

- Implementation of heat::clients::<service> are generally same.
  Only cinder, heat, keystone and nova provides additional parameters.

- The existing parameters in the base heat class are deprecated in
  favor of the new classes.

Change-Id: Icdf4f0201dd1e5f93a450473709851977ec20034
"
164,puppet-aodh/manifests/evaluator.pp,"Remove cleanup of [DEFAULT] evaluation_interval

This logic was added during the previous cycle by [1].

This old parameter should be removed when a deployment is upgraded to
Zed, thus we no longer need this cleanup beyond Zed.

[1] c58c36d92741bd41fda663d5765d9136399a77b5

Change-Id: Ic791e5b597d4b702241d7938ed8d0c0f37f2e7ff

Remove deprecated aodh::evaluator::coordination_url

... because it was deprecated during Xena cycle[1] in favor of the new
aodh::coordination class.

[1] 16091c8dd6f97f55fb7875e7843f3de7017a99ce

Change-Id: I0e11987c7d121b2fb639274ed60181c56ce4f6d1

Fix typos in parameter descriptions

Change-Id: I643cc6b6cc85c1c3fc9d4803ebbf56ed1c40da5c

Update section of the evaluation_interval parameter

The evaluation_interval parameter in the [DEFAULT] section has been
deprecated and it was migrated to the [evaluator] section.

This change updates the parameter section accordingly.

Depends-on: https://review.opendev.org/837864
Change-Id: If41e9e21771ea236ec18379790fe5427dcb6e8af
"
165,puppet-aodh/manifests/wsgi/apache.pp,"Use standard parameter description format for wsgi::apache

Currently parameter description of the <module>::wsgi::apache classes
are formatted differently in individual modules, and this is making
the maintenance effort quite difficult.

This change updates the description format following the srandard one
we are globally using in our modules to reduce undesired differences
between modules.

Change-Id: Ie874d47e7c9c37da642c2cc5d9c46e385e7cc176

Add Apache WSGI logging parameters for pipe/syslog

Add parameters for advanced logging configurations in Apache to
support piped logging and support for syslog (via mod_syslog
available in Apache >= 2.5.0)

Co-Authored-By: Andy Botting <andy@andybotting.com>
Change-Id: I16c7a6407d647a25d6093239b30845a212202a5c

Merge ""Adapt to new type validation in puppetlabs-apache""
Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: I9261c53fdb930fd9ff5e2c06e91eb312d665bb9a

Expose headers option of apache::vhost

The headers option in apache::vhost is required in some case, for
example when adding the X-XSS-Protection header. This change allows
customizing the option for the api vhost.

This change also adds support for request_headers so that both request
headers and response headers can customized.

Change-Id: I857407802617087f75334c8357055250dcd4cef5

Fix typos in parameter descriptions

Change-Id: I643cc6b6cc85c1c3fc9d4803ebbf56ed1c40da5c

apache+mod_wsgi: Disable SSL by default

During the previous cycle, a warning message was added to inform users
of this change.

Now the default value is updated so that SSL is disabled by default.

Change-Id: I0f05258885570637aa9d53b2d6a69c1756f375e9
"
166,puppet-aodh/manifests/coordination.pp,"Remove deprecated aodh::evaluator::coordination_url

... because it was deprecated during Xena cycle[1] in favor of the new
aodh::coordination class.

[1] 16091c8dd6f97f55fb7875e7843f3de7017a99ce

Change-Id: I0e11987c7d121b2fb639274ed60181c56ce4f6d1

Fix typos in parameter descriptions

Change-Id: I643cc6b6cc85c1c3fc9d4803ebbf56ed1c40da5c

coordination: Remove deprecated heartbeat

The parameter was deprecated during Yoga cycle[1] in favor of the new
heartbeat_interval parameter.

[1] 49eb825204860d8465158a41c84f6af558a67b41

Change-Id: I03d217663445001fc48f9192774ae6b680d2d7f9
"
167,puppet-aodh/manifests/healthcheck.pp,"Fix typos in parameter descriptions

Change-Id: I643cc6b6cc85c1c3fc9d4803ebbf56ed1c40da5c
"
168,puppet-aodh/manifests/init.pp,"Fix typos in parameter descriptions

Change-Id: I643cc6b6cc85c1c3fc9d4803ebbf56ed1c40da5c
"
169,puppet-aodh/manifests/keystone/auth.pp,"Fix typos in parameter descriptions

Change-Id: I643cc6b6cc85c1c3fc9d4803ebbf56ed1c40da5c
"
170,puppet-aodh/manifests/listener.pp,"Fix typos in parameter descriptions

Change-Id: I643cc6b6cc85c1c3fc9d4803ebbf56ed1c40da5c

listener: Add support for tunable parameters

Change-Id: Iaa9199dde153cfd218171a0b23c724bad421529c
"
171,puppet-aodh/manifests/logging.pp,"Fix typos in parameter descriptions

Change-Id: I643cc6b6cc85c1c3fc9d4803ebbf56ed1c40da5c
"
172,puppet-designate/manifests/api.pp,"Remove cleanup of [service:api] max_header_line

... because the logic was added during the previous cycle[1] and
the option should be removed when a deployment is upgraded to Zed.

[1] f39567e17b6e98a4cdf15608756a5463df32de39

Change-Id: Iecc650fe94846a2f643ff2bf0b613026a1fb6570

Merge ""Enable policy settings in designate-api""
Fix wrong variable used to determine designate api service

Closes-Bug: #1982794
Change-Id: I9140547a2f2a8d6fd8999394333c7d29fdd9cde0
"
173,puppet-designate/manifests/worker.pp,"worker: Remove deprecated worker_topic

The parameter was deprecated during the past cycle[1] in favor of
the new worker parameter.

[1] b3f265888674a6136890287365e3a34bf45484ce

Change-Id: I02673fe8ec9749c98f2381ab6b2bbe0c1093b576

Clean up deprecated parameters of designate::worker

This change removes the two ineffective parameters which were
deprecated during Yoga cycle in favor of the refactoring work[1].

[1] 913b9a5af480794c3d2518c17e53fe1a427c5627

Change-Id: I103433bcfa4227422f7daf2daa565cd32bde6d55

Remove deprecated designate::worker::worker_notify

... because the parameter was deprecated during Victoria cycle[1].

The actual parameter was already removed from Designate by [2].

[1] 3134f475ab516887d25792764bd4cd7e3bff6d9f
[2] 5d5d83e511acbf5d6f34e9a998ff16d96c5bb162

Change-Id: I9eb1e7d7e2463d21a52b347ccc8e8b1da9b975fc
"
174,puppet-designate/manifests/init.pp,"Merge ""Remove redundant hard-coded defaults of oslo.messaging parameters""
Remove redundant hard-coded defaults of oslo.messaging parameters

These define same values as the default values in the oslo.messaging
library, thus can be replaced by $::os_service_default.

Change-Id: I7da6736c7a47ebdc988bc8e0d7274cba873f72c6

Add support for [DEFAULT] supported_record_type

Change-Id: I566dca39f9d0d9b85f33a30a593f08000f705baf

Add support for [DEFAULT] default_ttl

Change-Id: I3f53227902caebd6131d2ed4e1f0b5bc1dc2edcd

Add support for [DEFAULT] host

... so that users can override this parameter to use static hostname
rather than the one deteted by socket.gethostname().

Change-Id: I909e40692aaa2b7a23a0efe8ff5a0392e8fe7293

Remove deprecated designate::neutron_network_type

The parameter was deprecated during Yoga cycle in favor of the separate
class to manage network_api:neutron parameters[1].

[1] 09a2c6b46c5ba02f8290904dca195329f2ebeafb

Change-Id: I31f52fcda46c33bf0163733aece4fd1279f63cc7
"
175,puppet-designate/manifests/sink.pp,"Remove deprecated behavior of enabled_notification_handlers

Handling of a false value was deprecated during Yoga cycle[1].

[1] f87bd126b0247112e3c130e1397484ba17b5647f

Change-Id: I9d96ba4bf12dd4c093aba55d7916598ff24f3327
"
176,puppet-designate/manifests/wsgi/apache.pp,"Use standard parameter description format for wsgi::apache

Currently parameter description of the <module>::wsgi::apache classes
are formatted differently in individual modules, and this is making
the maintenance effort quite difficult.

This change updates the description format following the srandard one
we are globally using in our modules to reduce undesired differences
between modules.

Change-Id: Ia9334d11a46b1e23532e112665ef6d2c5375eabe

Add Apache WSGI logging parameters for pipe/syslog

Add parameters for advanced logging configurations in Apache to
support piped logging and support for syslog (via mod_syslog
available in Apache >= 2.5.0)

Co-Authored-By: Andy Botting <andy@andybotting.com>
Change-Id: Idaddbca1acb1daafbf5381fc2e19f7db4748bbea

Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: I76f58c4e79a415ec26d2747e14516b108ce90248
"
177,puppet-designate/manifests/network_api/neutron.pp,"Remove deprecated designate::neutron_network_type

The parameter was deprecated during Yoga cycle in favor of the separate
class to manage network_api:neutron parameters[1].

[1] 09a2c6b46c5ba02f8290904dca195329f2ebeafb

Change-Id: I31f52fcda46c33bf0163733aece4fd1279f63cc7
"
178,puppet-designate/manifests/coordination.pp,"Remove deprecated designate::producer::backend_url

... because it was deprecated during Xena cycle[1] in favor of the new
designate::coordination class.

[1] 823d409fe8ef56bb5be931791c5624bd70df0e26
Change-Id: I564ef6ec944c4b0f4a48fe99db2aade54e7f684c
"
179,puppet-designate/manifests/producer.pp,"Remove deprecated designate::producer::backend_url

... because it was deprecated during Xena cycle[1] in favor of the new
designate::coordination class.

[1] 823d409fe8ef56bb5be931791c5624bd70df0e26
Change-Id: I564ef6ec944c4b0f4a48fe99db2aade54e7f684c
"
180,puppet-trove/manifests/init.pp,"Remove trove::default_neutron_networks

... because the parameter was deprecated in the past cycle by [1].

[1] 74881548a4315b09fa9488a94a70fa865b7b5d42

Change-Id: I7b12225aa82a05bcb978a3b6adc975c3a5d6c75c

Rename default_neutron_networks

... because the parameter was deprecated in favor of renaming to
the management_networks[1].

Also, allow usage of an Array value because the parameter is ListOpt.

[1] 44fbcfaaa608aba9184bd8757ba60c6a8155bae1

Change-Id: I4f8215995d098654d9303b54b5687552e94b23b7

Remove deprecated database options

... because these options were deprecated during Yoga cycle[1].

[1] a1f85ce1ef33f2d1f8c9bfe89e84d4f8a32248c0

Depends-on: https://review.opendev.org/842828
Change-Id: I6e7402bacd8ca23abda39d9fb3330cface5da288

Remove use_neutron parameter

... because it was deprecated during Yoga cycle[1] and has had no
effect since then.

[1] ddb0f14f95156c483c499fe95982d2e5777b236f

Change-Id: Ib9eab7d3c174c11932afb05c66138dfe3cbf5a7c
"
181,puppet-trove/manifests/guestagent.pp,"Remove deprecated trove::guestagent::control_exchange

The parameter was deprecated long ago[1] and has had no effect.

[1] 7cb103c17ff121de8f852988f356386fcf4229f1

Change-Id: I1e7f54ae462e72866d03a2ea7f00e656e68db513

Merge ""guestagent: Deprecate the backup_aes_cbc_key parameter""
Merge ""guestagent: Fix reference to trove::* parameters"""
182,puppet-trove/manifests/deps.pp,"Remove resource types for per-daemon config files

Since yoga relase, this module no longer uses separate config files for
individual daemons but use the single trove.conf [1].

This change removes the remaining resource types for the separate
.conf files, which should have been removed by the cleanup patch[2].

[1] f1c11c68d56e4f1ad5125fa0df04ab91d929cd33
[2] 4d87fa2c694adb33607fa33273faa849792351b1

Change-Id: I66c1ccedc2ef1a73b5ee3f053b843e97be0d59b4
"
183,puppet-trove/manifests/api.pp,"api: Remove redundant default values

These default values are same as the actual default values in Trove,
thus we can replace these by $::os_service_default. This saves us
from maintaining our own default.

Change-Id: I557a919be3496d5314baec303764b7e8b99ed2de

Avoid hard-coding default of http_*_rate parameters

The current hard-coded default values are exactly same as the default
values in Trove, thus can be replaced by $::os_service_default.

Change-Id: I241355d278f23ac05f42ef0150f41cc2a5795abb
"
184,puppet-trove/manifests/db.pp,"Remove deprecated database options

... because these options were deprecated during Yoga cycle[1].

[1] a1f85ce1ef33f2d1f8c9bfe89e84d4f8a32248c0

Depends-on: https://review.opendev.org/842828
Change-Id: I6e7402bacd8ca23abda39d9fb3330cface5da288
"
185,puppet-trove/manifests/conductor/service_credentials.pp,"Clean up deprecated items related to conductor/taskmanager

This change removes deprecated parmaeters and classes related to
trove-conductor and trove-taskmanager. These were deprecated during
past cycles and are ready to be removed.

Depends-on: https://review.opendev.org/839061
Change-Id: I250fb4cd098b7aaa6f4b9488e7226ffb27355046
"
186,puppet-trove/manifests/taskmanager/service_credentials.pp,"Clean up deprecated items related to conductor/taskmanager

This change removes deprecated parmaeters and classes related to
trove-conductor and trove-taskmanager. These were deprecated during
past cycles and are ready to be removed.

Depends-on: https://review.opendev.org/839061
Change-Id: I250fb4cd098b7aaa6f4b9488e7226ffb27355046
"
187,puppet-trove/manifests/conductor.pp,"Clean up deprecated items related to conductor/taskmanager

This change removes deprecated parmaeters and classes related to
trove-conductor and trove-taskmanager. These were deprecated during
past cycles and are ready to be removed.

Depends-on: https://review.opendev.org/839061
Change-Id: I250fb4cd098b7aaa6f4b9488e7226ffb27355046
"
188,puppet-trove/manifests/config.pp,"Clean up deprecated items related to conductor/taskmanager

This change removes deprecated parmaeters and classes related to
trove-conductor and trove-taskmanager. These were deprecated during
past cycles and are ready to be removed.

Depends-on: https://review.opendev.org/839061
Change-Id: I250fb4cd098b7aaa6f4b9488e7226ffb27355046
"
189,puppet-trove/manifests/taskmanager.pp,"Clean up deprecated items related to conductor/taskmanager

This change removes deprecated parmaeters and classes related to
trove-conductor and trove-taskmanager. These were deprecated during
past cycles and are ready to be removed.

Depends-on: https://review.opendev.org/839061
Change-Id: I250fb4cd098b7aaa6f4b9488e7226ffb27355046
"
190,puppet-barbican/manifests/wsgi/apache.pp,"Fix inconsistent parameter/resource names of wsgi::apache

The barbican::wsgi::apache class names a few parameters and resources
differently from the other modules. To make its interface and
implementation consistent with the other implementations, this renames
these inconsistent names. The old parameter names are kept but will be
removed in a future release.

Change-Id: I49ca51e4ea7a2404dfdbd0c88ce39339750da4f6

Use standard parameter description format for wsgi::apache

Currently parameter description of the <module>::wsgi::apache classes
are formatted differently in individual modules, and this is making
the maintenance effort quite difficult.

This change updates the description format following the srandard one
we are globally using in our modules to reduce undesired differences
between modules.

Change-Id: Ifac421c3a74bf600e8b0e596a8449e5f25cda90b

Add Apache WSGI logging parameters for pipe/syslog

Add parameters for advanced logging configurations in Apache to
support piped logging and support for syslog (via mod_syslog
available in Apache >= 2.5.0)

Co-Authored-By: Andy Botting <andy@andybotting.com>
Change-Id: I77f1d65b1f6085fdb1205de9654a8d6d2da496f5

Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: I9573f53e24dcf0666e4649189ccd8fcab0dbcc26

Expose headers option of apache::vhost

The headers option in apache::vhost is required in some case, for
example when adding the X-XSS-Protection header. This change allows
customizing the option for the api vhost.

This change also adds support for request_headers so that both request
headers and response headers can customized.

Change-Id: I0e78f2183ffe14c310ee5c5632c203258c8c85cd

Fix some typos in parameter descriptions

Change-Id: I634698c222da7e5f570ac3bd2cdee924457791bd

apache+mod_wsgi: Disable SSL by default

During the previous cycle, a warning message was added to inform users
of this change.

Now the default value is updated so that SSL is disabled by default.

Change-Id: I72cf30d418b99ba06c4d5738544acb1930d4806f
"
191,puppet-barbican/manifests/api.pp,"Remove the temporal logic to fix barbican_api pipeline

The old wrong value should be fixed when the deployment is updated to
stable/yoga, and the logic is no longer used in stable/zed and later.

Related-Bug: #1946378
Change-Id: I699847c127e5890857446585ededc9d860b0dc78

Clean up baribcan::api::retry_scheduler_* parameters

... because these were deprecated during Yoga cycle[1].

[1] 0d4580b27dd8a45e07c065e1dfc7ce446eb1dd77

Change-Id: I781d06e3ba9c9b9ab7fd8360095cdb67917f016c

Fix some typos in parameter descriptions

Change-Id: I634698c222da7e5f570ac3bd2cdee924457791bd

api: Deprecate unused ssl parameters

These parameters are used by oslo.service library but Barbican does not
provide wsgi servce based on the library.

Change-Id: Ie035ec4a4dbce089e9911e11f91c2c013998192b

Merge ""Remove non-existing bind_host/port""
Remove non-existing bind_host/port

The bind_host parameter and the bind_port parameter are not implemented
in current Barbican. This change removes these ineffective parameters
from barbican.conf.

Change-Id: I7758a6e852795c5410e6dab023ce612f44ee27fd

Merge ""Use more strict expression to look up the bind parameter"""
192,puppet-barbican/manifests/plugins/p11_crypto.pp,"Remove support for [p11_crypto_plugin] token_label

... because it was deprecated during Wallaby cycle[1].

[1] 4403fe7247151d324f80b865cc2d5a0a078d25fa

Change-Id: Ia9b89d92256f51d5a48a19849715335f6856e839
"
193,puppet-barbican/manifests/api/logging.pp,"Fix some typos in parameter descriptions

Change-Id: I634698c222da7e5f570ac3bd2cdee924457791bd
"
194,puppet-barbican/manifests/config.pp,"Fix some typos in parameter descriptions

Change-Id: I634698c222da7e5f570ac3bd2cdee924457791bd
"
195,puppet-barbican/manifests/healthcheck.pp,"Fix some typos in parameter descriptions

Change-Id: I634698c222da7e5f570ac3bd2cdee924457791bd
"
196,puppet-barbican/manifests/keystone/auth.pp,"Fix some typos in parameter descriptions

Change-Id: I634698c222da7e5f570ac3bd2cdee924457791bd
"
197,puppet-barbican/manifests/plugins/simple_crypto.pp,"Fix some typos in parameter descriptions

Change-Id: I634698c222da7e5f570ac3bd2cdee924457791bd
"
198,puppet-barbican/manifests/retry_scheduler.pp,"Fix some typos in parameter descriptions

Change-Id: I634698c222da7e5f570ac3bd2cdee924457791bd
"
199,puppet-manila/manifests/scheduler.pp,"Use $::os_service_default by default

This change prepares getting rid of the additional logic to manage
the scheduler_driver option, to follow the global pattern to use
 $::os_service_default by default.

Change-Id: Ic1d01425123bf02fa3caaf9f2ba72ed2233fc914

Ensure [DEFAULT] scheduler_driver is cleared by default

... otherwise the old setting can be left in manila.conf.

This also refactors unit tests for the manila::share class.

Change-Id: I30fa9fdc73164f898bf46d2983c807ec2bcd5451
"
200,puppet-manila/manifests/data.pp,"Support manila-data service

Manila provides the separate manila-data service to process
host-assisted share migration. This change introduces support for
the service.

Change-Id: I4ed63ae3992735352fd0f5a317e998074e127127
"
201,puppet-manila/manifests/params.pp,"Support manila-data service

Manila provides the separate manila-data service to process
host-assisted share migration. This change introduces support for
the service.

Change-Id: I4ed63ae3992735352fd0f5a317e998074e127127

Remove unused parameter

manila::params::lio_package_name is defined but is not used.

Change-Id: Ic3f7fe01610cee819088eb0d77f73b0b54003bdd
"
202,puppet-manila/manifests/network/neutron.pp,"Remove cleanup of [DEFAULT] network_api_class

... because the logic was added during Yoga cycle[1] and the old option
should be removed when a deployment is upgraded to Yoga.

[1] e7330687baa66c3c8d55aeb581643e4a227b6568

Change-Id: I0f39c0ce4bad8a6fd1d17faf6ffae11dda75919f
"
203,puppet-manila/manifests/setup_test_volume.pp,"Enable manila-share in acceptance tests

This change enables the manila-share service and lvm backend in
acceptance tests, so that we can test more complete setup.

Change-Id: I8e3c1cda17c897b6c13563ea733988e28dd49f8f
"
204,puppet-manila/manifests/backend/glusternative.pp,"Merge ""Allow mulitple GlusterFS backends""
Allow mulitple GlusterFS backends

This change fixes duplicate resource declarations when multiple
GlusterFS backends are configured.

Closes-Bug: #1987715
Change-Id: If29da565cdcc33605bc3f5211db22f0b157fa215

Remove deprecated glusterfs_native_path_to_private_key

... because it was deprecated during Wallaby cycle[1].

[1] bacfbc1c661a089c879fb66b1a965231254a9e0d

Change-Id: Ic7c6b80ca3e80d216f65a1075851280663ce1c16
"
205,puppet-manila/manifests/wsgi/apache.pp,"Add Apache WSGI logging parameters for pipe/syslog

Add parameters for advanced logging configurations in Apache to
support piped logging and support for syslog (via mod_syslog
available in Apache >= 2.5.0)

Co-Authored-By: Andy Botting <andy@andybotting.com>
Change-Id: I643778c71a683f95a5e91f0904634a0e849ad60d

Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: I690b84be0d91e39dc44b2013d90bf364710eac07
"
206,puppet-manila/manifests/backend/glusternfs.pp,"Allow mulitple GlusterFS backends

This change fixes duplicate resource declarations when multiple
GlusterFS backends are configured.

Closes-Bug: #1987715
Change-Id: If29da565cdcc33605bc3f5211db22f0b157fa215
"
207,puppet-manila/manifests/quota.pp,"quota: Clean up deprecated quota_* parameters

These were deprecated during Yoga cycle by [1].

[1] 83651174222a300d450279e1861b15a7ea8812d1

Change-Id: I3f85d92e0164af3eb8a6810e82c2c23dda8d61bd
"
208,puppet-manila/manifests/backend/lvm.pp,"lvm: Deprecate driver_handles_share_servers

The manila-share service requires that the driver_handles_share_servers
parameter is configured for all backends and the service fails to start
if the parameter is missing.

Because lvm driver supports only driver_handles_share_servers=False,
this change makes the parameter hard-coded instead of requiring users
to set the parameter correctly.

Change-Id: Idc9dee01e66cc3b72ae441aa150281f7313f14f4
"
209,puppet-manila/manifests/backends.pp,"Accept a string value for enabled_share_backends

Currently using a string value for the enabled_share_backends parameter
causes the following error, which is not quite clear for users.
~~~
Error: Evaluation Error: Error while evaluating a Function Call, 'join'
parameter 'arg' expects an Array value, got String ...
~~~

This change allows usage of a single string value, as is done for
the other ListOpts, because there is no logic which actually requires
an array value.

Change-Id: I786e5d477131fa60502a9985f0db4b19f418ce9b
"
210,puppet-horizon/manifests/dashboards/designate.pp,"Fix the wrong key to look up designate policies

This change fixes the key to look up designate policies from the base
horizon class parameter. The previous value is for octavia.

Change-Id: I5ef41b5ccc49b742172848f2ff63b08f038c114b
"
211,puppet-horizon/manifests/init.pp,"Ensure pymemcache library is installed

The pymemcache library should be installed when pymemcache backend is
used but this library is not installed by the package dependencies and
should be installed additionally.

This also ensures the cache libraries are installed during package
installation phase, so that the libraries are available when horizon
is started.

Closes-Bug: #1988205
Change-Id: I90cd9d9e1276fae71fcb9cbc7ba95b8839690dbd

Merge ""Validate boolean values used in if-statement""
Merge ""Do not show diff of local_settings(.py)""
Validate boolean values used in if-statement

This change ensures the parameters used in if-statement take boolean
values, because usage of a different type(eg. String) can cause
unexpected evaluation result.

[vagrant@localhost ~]$ cat foo.pp
$foo = false
$bar = 'False'
$baz = 'false'

if $foo { warning('foo') }
if $bar { warning('bar') }
if $baz { warning('baz') }
[vagrant@localhost ~]$ puppet apply foo.pp
Warning: Scope(Class[main]): bar
Warning: Scope(Class[main]): baz
Notice: Compiled catalog for localhost.localdomain in environment production in 0.02 seconds
Notice: Applied catalog in 0.01 seconds
[vagrant@localhost ~]$

Change-Id: I5c327c37e700829ffb80b9f58d15607aa883bdc1

Do not show diff of local_settings(.py)

... because the file contains a few sensitive values like SECRET_KEY.

Closes-Bug: #1987015
Change-Id: Ie96eb626148214270c5a3a041087fcc679c127ce

Remove logic to handle quoted horizon_upload_mode

This is follow-up of 625275af36f6775e939334724f439c480d863d24 and
removes the temporal logic to keep compatibility, because we have kept
the warning message for several cycles.

Related-Bug: #1946277
Change-Id: I1b11305df67dbe3127642a96bda429faae0059d5

Fix type validation error with puppetlabs-apache 8.0.0

This is follow-up of 3ae8f91ca4c11f06ae145907b2b6c0b5ea16cf2d and fixes
type validation error of apache::vhost::access_log_format, which no
longer accepts a boolean value.

Related-Bug: #1983300
Change-Id: Ic5bcbcd94bfe74b0ff7ea750780021daa772a196

Merge ""Add inet6 prefix only when MemcacheCache is used""
Add option websso_choices_hide_keystone

This change allows a cloud-deployer using WEBSSO to not expose a
form for attempting to log in using Keystone Credentials.

Closes-Bug: #1983855
Change-Id: Iae15a5dac8f3de0f70dad5af8837177f67857428

Add inet6 prefix only when MemcacheCache is used

inet6 prefix is required only by python-memcached and it should NOT be
added when a different backend like PyMemcacheCache is used.

Closes-Bug: #1983182
Change-Id: Iee260f8578ed6c473c651e0665a548c68e94c954
"
212,puppet-horizon/manifests/params.pp,"Ensure pymemcache library is installed

The pymemcache library should be installed when pymemcache backend is
used but this library is not installed by the package dependencies and
should be installed additionally.

This also ensures the cache libraries are installed during package
installation phase, so that the libraries are available when horizon
is started.

Closes-Bug: #1988205
Change-Id: I90cd9d9e1276fae71fcb9cbc7ba95b8839690dbd
"
213,puppet-horizon/manifests/wsgi/apache.pp,"Remove unnecessary a+x bit from /var/log/horizon

The /var/log/horizon directory is created with a+x bit but this
permission is not really necessary.

Change-Id: I79a2628e9c262c25fce7a1d0b0dbfc8de62530b4

Remove redundant include of apache::mod::*

The puppetlabs-apache module includes the classes for required modules
automatically based on the parameters used in apache::vhost.

apache::mod::wsgi
https://github.com/puppetlabs/puppetlabs-apache/commit/efffa854f
(available since 1.1.0)

apache::mod::ssl
https://github.com/puppetlabs/puppetlabs-apache/commit/ee37f2146
(available since 0.3.0)

Change-Id: I44d49918b81325815d5d7a3770c2e8a7487eef74

Fix type validation error with puppetlabs-apache 8.0.0

This is follow-up of 3ae8f91ca4c11f06ae145907b2b6c0b5ea16cf2d and fixes
type validation error of apache::vhost::access_log_format, which no
longer accepts a boolean value.

Related-Bug: #1983300
Change-Id: Ic5bcbcd94bfe74b0ff7ea750780021daa772a196

Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Change-Id: I5aabfbfd438bd4bc981f20b3f924a41ec963648c
"
214,puppet-gnocchi/manifests/api.pp,"Replace deprecated [oslo_middleware] enable_proxy_headers_parsing

Gnocchi replaced usage of http_proxy_to_wsgi middleware from
the oslo.middleware library by its own implementation since Gnocchi
4.4[1]. Because now both Ubuntu and CentOS uses Gnocchi 4.4.z, this
replaces the deprecated [oslo_middleware] parameter by the new [api]
parameter.

[1] https://github.com/gnocchixyz/gnocchi/commit/bcd9a8cdd7c37fb655764a3b12c7e567598d088d

Change-Id: I52ba953c481bb66dd8a5af35b74c11dac6278e45

api: Remove deprecated middleware option

... because it was deprecated during Yoga cycle[1] and has had no
effect since then.

[1] be05efdc44c488e36491c9653f4188364e9c0f4e
Change-Id: I473ccd52df065864027b6b88b49a9eece66ba1ac
"
215,puppet-gnocchi/manifests/wsgi/apache.pp,"Use standard parameter description format for wsgi::apache

Currently parameter description of the <module>::wsgi::apache classes
are formatted differently in individual modules, and this is making
the maintenance effort quite difficult.

This change updates the description format following the standard one
we are globally using in our modules to reduce undesired differences
between modules.

Change-Id: Id99d044171b1fafefd310fafff2ce2f4de1e9fa8

Add Apache WSGI logging parameters for pipe/syslog

Add parameters for advanced logging configurations in Apache to
support piped logging and support for syslog (via mod_syslog
available in Apache >= 2.5.0)

Co-Authored-By: Andy Botting <andy@andybotting.com>
Change-Id: Ifa33b2e84284d8032c4e4f54acb26c30fc285cb5

Merge ""Adapt to new type validation in puppetlabs-apache""
Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: Ie6310a022e9715336832865741318369bc3fa188

Expose headers option of apache::vhost

The headers option in apache::vhost is required in some case, for
example when adding the X-XSS-Protection header. This change allows
customizing the option for the api vhost.

This change also adds support for request_headers so that both request
headers and response headers can customized.

Change-Id: I9fe841e9dc2a90627d0debdc9b6766a847390aed

Fix typos in parameter descriptions and tests

Change-Id: I20e1dda110e479e796604991be240021fd51d861

apache+mod_wsgi: Disable SSL by default

During the previous cycle, a warning message was added to inform users
of this change.

Now the default value is updated so that SSL is disabled by default.

Change-Id: I7f32413d452e98306906002461ae0b4304d284ca
"
216,puppet-gnocchi/manifests/metricd.pp,"Remove gnocchi::metricd::cleanup_delay

... because the parameter was deprecated during Yoga cycle[1] in favor
of the new metric_cleanup_delay parameter.

[1] 04f29cb088e7e1eadae5cb1834dab637d6c5b745

Change-Id: I8efe9f153ca112dafb621edc4ee3b3d090083d91

Fix typos in parameter descriptions and tests

Change-Id: I20e1dda110e479e796604991be240021fd51d861
"
217,puppet-gnocchi/manifests/healthcheck.pp,"Fix typos in parameter descriptions and tests

Change-Id: I20e1dda110e479e796604991be240021fd51d861
"
218,puppet-gnocchi/manifests/keystone/auth.pp,"Fix typos in parameter descriptions and tests

Change-Id: I20e1dda110e479e796604991be240021fd51d861
"
219,puppet-gnocchi/manifests/storage/s3.pp,"Fix typos in parameter descriptions and tests

Change-Id: I20e1dda110e479e796604991be240021fd51d861
"
220,puppet-gnocchi/manifests/statsd.pp,"Add support for [statsd] creator

Change-Id: I719ff8386c7ea73cbaeae4d7db8cc6ed82b8cf79

statsd: Add support for host and port

This change introduces support for the following two parameters.
 - [statsd] host
 - [statsd] port

Change-Id: Ia4e4a5d5ae40a7d4a358569d9caacb07ff391d6a

Make sure archive_policy_name is cleared by default

The archive_policy_name parameter currently defaults to undef, which
leaves the parameter unmaintained. This change ensures the parameter is
cleared by default, as it is not set in the default configuration files
provided by packages.

Change-Id: I5a7b757307e5eae4f24f9c501a869d0693fc496b
"
221,puppet-mistral/manifests/wsgi/apache.pp,"Use standard parameter description format for wsgi::apache

Currently parameter description of the <module>::wsgi::apache classes
are formatted differently in individual modules, and this is making
the maintenance effort quite difficult.

This change updates the description format following the standard one
we are globally using in our modules to reduce undesired differences
between modules.

Change-Id: Id3eaa905c19cbe245ffc3e1283469b3f35086450

Add Apache WSGI logging parameters for pipe/syslog

Add parameters for advanced logging configurations in Apache to
support piped logging and support for syslog (via mod_syslog
available in Apache >= 2.5.0)

Co-Authored-By: Andy Botting <andy@andybotting.com>
Change-Id: I220b2335e682083dfa71375324b2f230f0ca5621

Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: I86e06f1eb4aacbdbc70a0e9353e467617400fd0c

Expose headers option of apache::vhost

The headers option in apache::vhost is required in some case, for
example when adding the X-XSS-Protection header. This change allows
customizing the option for the api vhost.

This change also adds support for request_headers so that both request
headers and response headers can customized.

Change-Id: Ic8154cb670c821ccf06c33721ac73f89c25d78c8

Fix typos in parameter descriptions

Change-Id: Idc7bc6f427e89b88f0f0b873cf723795544676d5

apache+mod_wsgi: Disable SSL by default

During the previous cycle, a warning message was added to inform users
of this change.

Now the default value is updated so that SSL is disabled by default.

Change-Id: Icd5632d624c215a699450ae3af5cb71fc3e44cd6
"
222,puppet-mistral/manifests/coordination.pp,"Remove deprecated mistral::coordination_* parameters

... because these were deprecated during Xena cycle[1] favor of
the independent mistral::coordination class.

[1] 298c6ec174780d97966d1724107910ab88d26def

Change-Id: Idde1ac828eb1be5dacf2f9e6d050aac097c5e910

Fix typos in parameter descriptions

Change-Id: Idc7bc6f427e89b88f0f0b873cf723795544676d5
"
223,puppet-mistral/manifests/init.pp,"Remove deprecated mistral::coordination_* parameters

... because these were deprecated during Xena cycle[1] favor of
the independent mistral::coordination class.

[1] 298c6ec174780d97966d1724107910ab88d26def

Change-Id: Idde1ac828eb1be5dacf2f9e6d050aac097c5e910
"
224,puppet-mistral/manifests/engine.pp,"Remove deprecated mistral::engine parameters

These parameters were deprecated during Yoga cycle[1] in favor of
the new independent mistral::execution_expiration_policy class.

[1] 0b8ca269cb7d966818bcdaee8b0b112d492b7e51

Change-Id: Iad14d98440632f3587e672c047ca09a246258ca8

Fix typos in parameter descriptions

Change-Id: Idc7bc6f427e89b88f0f0b873cf723795544676d5

Support more [execution_expiration_policy] parameters

Change-Id: I3fb67451dea1a9834002a466e4bc206869527fbb

Add tunable parameters of mistral-engine

This change introduces support for some tunable parameters of
the mistral-engine service.

Change-Id: I9f67af2855b6b423c3d5cfbf69f2ff7747aef7d0
"
225,puppet-mistral/manifests/cron_trigger.pp,"Fix typos in parameter descriptions

Change-Id: Idc7bc6f427e89b88f0f0b873cf723795544676d5
"
226,puppet-mistral/manifests/execution_expiration_policy.pp,"Fix typos in parameter descriptions

Change-Id: Idc7bc6f427e89b88f0f0b873cf723795544676d5

Support more [execution_expiration_policy] parameters

Change-Id: I3fb67451dea1a9834002a466e4bc206869527fbb
"
227,puppet-mistral/manifests/keystone/auth.pp,"Fix typos in parameter descriptions

Change-Id: Idc7bc6f427e89b88f0f0b873cf723795544676d5
"
228,puppet-mistral/manifests/logging.pp,"Fix typos in parameter descriptions

Change-Id: Idc7bc6f427e89b88f0f0b873cf723795544676d5
"
229,puppet-mistral/manifests/notifier.pp,"Refactor mistral::notifier

Change-Id: I3438cc6d9b473ff774fc8e68a3f9df65c792bfc6
"
230,puppet-magnum/manifests/cinder.pp,"Add cinder class to manage cinder config

Add a new class magnum::cinder to manage [cinder] section of magnum
config

Change-Id: I46f86fcc27002f76028014e42dc485ba292d56c5
"
231,puppet-magnum/manifests/x509.pp,"Add x509 class to manage x509 config

Add a new class magnum::x509 to manage x509 section of magnum config

Change-Id: I7774507d112b1cf94e0240d78f67f7c186ef5b30
"
232,puppet-magnum/manifests/wsgi/apache.pp,"Add Apache WSGI logging parameters for pipe/syslog

Add parameters for advanced logging configurations in Apache to
support piped logging and support for syslog (via mod_syslog
available in Apache >= 2.5.0)

Co-Authored-By: Andy Botting <andy@andybotting.com>
Change-Id: Id657139568a70be87b7d7f2a9d8fa0b6f1aa2307

Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: I0c686d7c2d90aa94648ef4a8f9b86bd05e6d498b

Merge ""Expose headers option of apache::vhost""
Expose headers option of apache::vhost

The headers option in apache::vhost is required in some case, for
example when adding the X-XSS-Protection header. This change allows
customizing the option for the api vhost.

This change also adds support for request_headers so that both request
headers and response headers can customized.

Change-Id: I84ec512b7dbed382f5d86b30f92de526ba0753eb

Fix typos in parameter descriptions and tests

Change-Id: I0594a367d1587e3b450a97c4a4548b902225f501
"
233,puppet-magnum/manifests/clients/cinder.pp,"Fix typos in parameter descriptions and tests

Change-Id: I0594a367d1587e3b450a97c4a4548b902225f501

Fix reference to magnum::clients parameters

The magnum::clients::* classes uses magnum::clients parameters by
default but reference is broken unless the classes are included in
a proper order. This change ensures the reference works, by adding
inheritance between classes.

Closes-Bug: #1964452
Change-Id: I5da05b9d3ba2635db7f9170d8e3cab6bf21f8511
"
234,puppet-magnum/manifests/healthcheck.pp,"Fix typos in parameter descriptions and tests

Change-Id: I0594a367d1587e3b450a97c4a4548b902225f501
"
235,puppet-magnum/manifests/init.pp,"Fix typos in parameter descriptions and tests

Change-Id: I0594a367d1587e3b450a97c4a4548b902225f501
"
236,puppet-magnum/manifests/keystone/auth.pp,"Fix typos in parameter descriptions and tests

Change-Id: I0594a367d1587e3b450a97c4a4548b902225f501
"
237,puppet-magnum/manifests/keystone/keystone_auth.pp,"Fix typos in parameter descriptions and tests

Change-Id: I0594a367d1587e3b450a97c4a4548b902225f501

keystone_auth: Require the password parameter

The keystone_auth parameters are required so that magnum can interact
with the other OpenStack services. This change ensures the parameter
is configured.

Change-Id: I745298661d6fc2b6d3f92da0edc8c6430b29a7ee

keystone_auth: Support ssl parameters

This change adds support for SSL parameters of [keystone_auth] section.

Note:
Management of [keystone_auth] parameters is removed from the authtoken
class. However this is effectively same, because Magnum reads
[keystone_authtoken] parameters in case [keystone_auth] parameters are
not set.

Change-Id: I3acc6a64b7789633ab068d8bbdcb2b9c11f2fb2d
"
238,puppet-magnum/manifests/logging.pp,"Fix typos in parameter descriptions and tests

Change-Id: I0594a367d1587e3b450a97c4a4548b902225f501
"
239,puppet-magnum/manifests/conductor.pp,"Conductor: Do not include the authtoken class

... because keystone_authtoken parameters are used not by conductor
but by api service.

Change-Id: Ib5bc3d81d2782751a02d092380347fdf77d52334
"
240,puppet-magnum/manifests/keystone/authtoken.pp,"keystone_auth: Support ssl parameters

This change adds support for SSL parameters of [keystone_auth] section.

Note:
Management of [keystone_auth] parameters is removed from the authtoken
class. However this is effectively same, because Magnum reads
[keystone_authtoken] parameters in case [keystone_auth] parameters are
not set.

Change-Id: I3acc6a64b7789633ab068d8bbdcb2b9c11f2fb2d
"
241,puppet-magnum/manifests/clients/glance.pp,"Avoid hard-coding api versions

Change-Id: Ic3b2bc4defcefc6375504ff5912e34247ca6a7bc

Fix reference to magnum::clients parameters

The magnum::clients::* classes uses magnum::clients parameters by
default but reference is broken unless the classes are included in
a proper order. This change ensures the reference works, by adding
inheritance between classes.

Closes-Bug: #1964452
Change-Id: I5da05b9d3ba2635db7f9170d8e3cab6bf21f8511
"
242,puppet-magnum/manifests/clients/heat.pp,"Avoid hard-coding api versions

Change-Id: Ic3b2bc4defcefc6375504ff5912e34247ca6a7bc

Fix reference to magnum::clients parameters

The magnum::clients::* classes uses magnum::clients parameters by
default but reference is broken unless the classes are included in
a proper order. This change ensures the reference works, by adding
inheritance between classes.

Closes-Bug: #1964452
Change-Id: I5da05b9d3ba2635db7f9170d8e3cab6bf21f8511
"
243,puppet-magnum/manifests/clients/nova.pp,"Avoid hard-coding api versions

Change-Id: Ic3b2bc4defcefc6375504ff5912e34247ca6a7bc

Fix reference to magnum::clients parameters

The magnum::clients::* classes uses magnum::clients parameters by
default but reference is broken unless the classes are included in
a proper order. This change ensures the reference works, by adding
inheritance between classes.

Closes-Bug: #1964452
Change-Id: I5da05b9d3ba2635db7f9170d8e3cab6bf21f8511
"
244,puppet-magnum/manifests/clients/barbican.pp,"Fix reference to magnum::clients parameters

The magnum::clients::* classes uses magnum::clients parameters by
default but reference is broken unless the classes are included in
a proper order. This change ensures the reference works, by adding
inheritance between classes.

Closes-Bug: #1964452
Change-Id: I5da05b9d3ba2635db7f9170d8e3cab6bf21f8511
"
245,puppet-magnum/manifests/clients/magnum.pp,"Fix reference to magnum::clients parameters

The magnum::clients::* classes uses magnum::clients parameters by
default but reference is broken unless the classes are included in
a proper order. This change ensures the reference works, by adding
inheritance between classes.

Closes-Bug: #1964452
Change-Id: I5da05b9d3ba2635db7f9170d8e3cab6bf21f8511
"
246,puppet-magnum/manifests/clients/neutron.pp,"Fix reference to magnum::clients parameters

The magnum::clients::* classes uses magnum::clients parameters by
default but reference is broken unless the classes are included in
a proper order. This change ensures the reference works, by adding
inheritance between classes.

Closes-Bug: #1964452
Change-Id: I5da05b9d3ba2635db7f9170d8e3cab6bf21f8511
"
247,puppet-magnum/manifests/clients/octavia.pp,"Fix reference to magnum::clients parameters

The magnum::clients::* classes uses magnum::clients parameters by
default but reference is broken unless the classes are included in
a proper order. This change ensures the reference works, by adding
inheritance between classes.

Closes-Bug: #1964452
Change-Id: I5da05b9d3ba2635db7f9170d8e3cab6bf21f8511
"
248,puppet-openstacklib/manifests/wsgi/apache.pp,"Remove redundant include of apache::mod::*

The puppetlabs-apache module includes the classes for required modules
automatically based on the parameters used in apache::vhost.

apache::mod::wsgi
https://github.com/puppetlabs/puppetlabs-apache/commit/efffa854f
(available since 1.1.0)

apache::mod::ssl
https://github.com/puppetlabs/puppetlabs-apache/commit/ee37f2146
(available since 0.3.0)

Change-Id: I6fd1ba6b721940ff96f977782e1e15df6191413d

Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1]. This change updates the default values to adapt to that
change.

Note that we still need to fix the unit tests as these are affected by
the change in default values. We can fix these once the new release is
made in the puppetlabs-apache module.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Change-Id: Ic6f65fdcb8953e0307d8a9d34cecb7aa1821a018
"
249,puppet-openstacklib/manifests/policy/base.pp,"Disallow duplicate policy rules with the same key

json never accepts defining multiple records with the same key. This
change modifies the resource name to detect duplicate items defined
with the same key, instead of silently ignore some of them.

Change-Id: I8b18015f4789f97cf07706ad6b3c99ce1eaedaf9
"
250,puppet-openstacklib/manifests/clouds.pp,"Hide differences when updating clouds.yaml

The clouds.yaml file includes credentials to access OpenStack APIs, so
differences should be hidden from output.

Change-Id: I7728df4bae694fe560e2e2b90ee4bb480f03a43c
"
251,puppet-watcher/manifests/api.pp,"Remove deprecated watcher::api::watcher_clients_*

... because these were deprecated during Yoga cycle[1][2][3].

[1] c507b55112d09c80f1598a28fee40c522ff26a14
[2] 3fe4b7d3a0ae0c7f76471a5c230b71caa7f242ef
[3] 16bcc44238bd018c527c87c4cd0542f5cadc5774

Change-Id: If96c5ac9016f799977218b24d9103e8efab093b7

Remove deprecated watcher::api::watcher_api_* parameters

... because these were deprecated during Yoga cycle[1].

[1] 2a689b750a7842e903f7bd9834f442c11d7b9941

Change-Id: Id4916a8bde771a1d122fa78f19833d5d21c34a1e

Stop hard-coding default of [api] port

... because the current hard-coded value is same as the default value
in Watcher itself.

Change-Id: I62ba8903caa91f11b265142bee12b2046d3cccf0

Stop listening at 0.0.0.0 by default

Usage of 0.0.0.0 exposes API endpoint to all networks and can cause
unexpected leakage. This change updates the default to use more
restricted address (127.0.0.1, which is the default defined in Watcher
itself) unless the address is given by a user explicitly.

Change-Id: Ibc895cf2b06d3b0c1b2073d8d6aa90d7d6f299d2

Do not validate the deprecated parameter

The watcher::api::watcher_client_password parameter was deprecated
during Yoga cycle in favor of the new watcher::watcher_clients_auth
class[1]. Thus the parameter should not be validated.

[1] 16bcc44238bd018c527c87c4cd0542f5cadc5774

Closes-Bug: #1973316
Change-Id: Ied515e3ba52d9fb9bd96ea24149fa7f6c44db9c5

Create a separate class for watcher_clients_auth parameters

This change introduces a separate class for watcher_clients_auth
parameters, which are currently managed by watcher::api, so that
we follow the best practise to create a class per config section.

Change-Id: I5fb1bb6ceca65c53c6d513db6683dc11f9b42635
"
252,puppet-watcher/manifests/watcher_clients_auth.pp,"Remove deprecated watcher::api::watcher_clients_*

... because these were deprecated during Yoga cycle[1][2][3].

[1] c507b55112d09c80f1598a28fee40c522ff26a14
[2] 3fe4b7d3a0ae0c7f76471a5c230b71caa7f242ef
[3] 16bcc44238bd018c527c87c4cd0542f5cadc5774

Change-Id: If96c5ac9016f799977218b24d9103e8efab093b7

Globally support system scope credentials

After spending huge effort to understand the exact requirements to
enforce SRBAC, we learned it's very difficult to find the required
scope in each credential. This requires understanding implementation of
client-side as well as server-side, and requirement might be different
according to the deployment architecture or features used.

Instead of implementing support based on the actual implementation,
this introduces support for system scope credentials to all places
where keystone user credential is defined, and make all credential
configurations consistent.

Change-Id: I1515d077c7cdd3cddb805a0b68199ee913975704

Create a separate class for watcher_clients_auth parameters

This change introduces a separate class for watcher_clients_auth
parameters, which are currently managed by watcher::api, so that
we follow the best practise to create a class per config section.

Change-Id: I5fb1bb6ceca65c53c6d513db6683dc11f9b42635
"
253,puppet-watcher/manifests/wsgi/apache.pp,"Add Apache WSGI logging parameters for pipe/syslog

Add parameters for advanced logging configurations in Apache to
support piped logging and support for syslog (via mod_syslog
available in Apache >= 2.5.0)

Co-Authored-By: Andy Botting <andy@andybotting.com>
Change-Id: Iaf3e13cbda1cf5fe25f8c4b9fb945f13fa4f30f3

Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: I463c2a8cd1b08330633f676ee0f4e66eb62c51d9

Expose headers option of apache::vhost

The headers option in apache::vhost is required in some case, for
example when adding the X-XSS-Protection header. This change allows
customizing the option for the api vhost.

This change also adds support for request_headers so that both request
headers and response headers can customized.

Change-Id: I3f0777ec48dd0196ad82b902ab2c3f54cf170717

apache+mod_wsgi: Disable SSL by default

During the previous cycle, a warning message was added to inform users
of this change.

Now the default value is updated so that SSL is disabled by default.

Change-Id: I72ddec25f8a7d747ab2816f2b76aae2f07ccfeba
"
254,puppet-oslo/manifests/cache.pp,"Merge ""cache: Support array value for tls_allowed_ciphers""
Fox wrong format of [cache] backend_argument

This option is not a ListOpt but a MultiStrOpt. So an array values
should NOT be converted to the colon-separated list format.

Closes-Bug: #1997603
Change-Id: If346affd48013f4f553a5fddc93524a8408cc605

cache: Support array value for tls_allowed_ciphers

The [oslo_cache] tls_allowed_ciphers option takes a colon-seprated
list. This change allows usage of a native array value to set
the value so that users can more easily compose up the value without
considering the actual value format.

Change-Id: I5c295c747a0f19757e3b3c7eaf990b32d7e1af11

cache: Ensure pymemcache library is installed

The pymemcache library should be installed when pymemcache backend is
used but this library is not required by the oslo.cache library or
its dependencies and should be installed additionally.

Closes-Bug: #1988205
Change-Id: I9422af416e74c53e09f6216bcbeab234337ccbae

Fix typos is parameter descriptions

Change-Id: I3134bd39892f7d1412dd267e4995aaece87523c2
"
255,puppet-oslo/manifests/os_brick.pp,"Add common implementation to manage [os_brick] options

The os-brick library now supports its own lock_path configuration. This
adds the defined resource type to manage the option so that we can
reuse this implementation in some modules.

Depends-on: https://review.opendev.org/c/openstack/os-brick/+/849324
Change-Id: Iae1c155692fec845a8cab0ae284eeeaaf3336962
"
256,puppet-oslo/manifests/coordination.pp,"coordination: Deprecate support of the etcd3 driver

The etcd3 driver of tooz has been deprecated. This change deprecates
its support in the puppet modules so that we can remove the support in
a future release.

Depends-on: https://review.opendev.org/833107
Change-Id: I3cb9d3321957341d2110178ed7b67bfe3f265a38
"
257,puppet-oslo/manifests/db.pp,"Remove deprecated oslo::db::use_tpool

The parameter was deprecated during Yoga cycle[1] and is no longer used
by the other modules.

[1] af6514829c48a4a6c06d06abc66552e4424fdc81

Change-Id: I9c15808bc1725be7ec6e24b37c066c089990e85e

Fix typos is parameter descriptions

Change-Id: I3134bd39892f7d1412dd267e4995aaece87523c2

Merge ""db: Remove MongoDB backend support""
db: Remove MongoDB backend support

Support for MongoDB backend was used by puppet-ceilometer but it is
no longer used since MongoDB was replaced by Gnocchi.

Because we no longer expect any real use case, this change removes
the implementation directly with deprecation skipped.

Change-Id: I5203cefe77c6c1410842fa7c530f98761fe65ed4

db: Remove min_pool_size

... because it was deprecated during Ussuri cycle[1].

[1] 1338b26b02a76735e53968eea1ea28a2cb68a1af

Change-Id: I86ff6b35b7e2ea29799ff98d734b7e9b4b2e0f08

db: remove idle_timeout

... because it was deprecated during Train cycle[1] in favor of the new
connection_recycle_time parameter.

[1] 3eb0e709473d53bc9a26c672c10486828d84d50f

Change-Id: Iecd45f2e551eb46d3d8b839e5911898591272705

Fix typo in warning message

Change-Id: I53e794088bfac13785776b6265cc0f23e1c20d91

db: Fix deprecation warning about use_tpool

Currently the warning log is shown when the parameter is NOT set,
because of the wrong if condition.

Change-Id: I462592ca7d3d2654246cd890c6097e97bd967707
"
258,puppet-oslo/manifests/privsep.pp,"privsep: Add support for the remaining parameters

This change adds support for the following two parameters of
the oslo.privsep library, so that all options can be configured by
the oslo::privsep defined resource type.

 - thread_pool_size
 - logger_name

Change-Id: I88eb0a5a1d3fd795a2c29b7be4d6e5722a330c45
"
259,puppet-oslo/manifests/healthcheck.pp,"Fix typos is parameter descriptions

Change-Id: I3134bd39892f7d1412dd267e4995aaece87523c2
"
260,puppet-oslo/manifests/limit.pp,"Fix typos is parameter descriptions

Change-Id: I3134bd39892f7d1412dd267e4995aaece87523c2
"
261,puppet-oslo/manifests/messaging/amqp.pp,"Fix typos is parameter descriptions

Change-Id: I3134bd39892f7d1412dd267e4995aaece87523c2

Remove allow_insecure_clients

... because it was deprecated during Wallaby cycle[1].

[1] c08a99f05cacb37e18554dd07f35ebf0a2ba3178

Change-Id: I4a76fb16e4fbb3711db5c86ab35000334e95c124
"
262,puppet-oslo/manifests/messaging/rabbit.pp,"Fix typos is parameter descriptions

Change-Id: I3134bd39892f7d1412dd267e4995aaece87523c2
"
263,puppet-oslo/manifests/service.pp,"Fix typos is parameter descriptions

Change-Id: I3134bd39892f7d1412dd267e4995aaece87523c2

Split oslo::service defined type

The oslo::service defined type was added a long ago but has never been
used by any other modules so far. The main blocker is that the type
manages not only common service parameters but also wsgi/ssl parameters
which are specific to api services.

This change splits the defined type to smaller modules so that we can
reuse the implementation.

Because the defined type is not used by any other modules at this
moment, and we don't expect direct usage of these resource type(*1),
this change is backword-incompatible.

(*1)
Technically it can be used but cause multiple conflicts.

Change-Id: If524155bf2d0dda964c6b451d7b26f36481514f5
"
264,puppet-oslo/manifests/params.pp,"db: Remove MongoDB backend support

Support for MongoDB backend was used by puppet-ceilometer but it is
no longer used since MongoDB was replaced by Gnocchi.

Because we no longer expect any real use case, this change removes
the implementation directly with deprecation skipped.

Change-Id: I5203cefe77c6c1410842fa7c530f98761fe65ed4
"
265,puppet-oslo/manifests/log.pp,"log: Accept array for default_log_levels

Currently the default_log_levels parameter accepts only hash or string.
This change adds support for an array value, so that users can use
an array of 'logger=LEVEL' strings.

Change-Id: I8c4358128438700430645df132882ec46a8885b9
"
266,puppet-oslo/manifests/service/ssl.pp,"Split oslo::service defined type

The oslo::service defined type was added a long ago but has never been
used by any other modules so far. The main blocker is that the type
manages not only common service parameters but also wsgi/ssl parameters
which are specific to api services.

This change splits the defined type to smaller modules so that we can
reuse the implementation.

Because the defined type is not used by any other modules at this
moment, and we don't expect direct usage of these resource type(*1),
this change is backword-incompatible.

(*1)
Technically it can be used but cause multiple conflicts.

Change-Id: If524155bf2d0dda964c6b451d7b26f36481514f5
"
267,puppet-oslo/manifests/service/wsgi.pp,"Split oslo::service defined type

The oslo::service defined type was added a long ago but has never been
used by any other modules so far. The main blocker is that the type
manages not only common service parameters but also wsgi/ssl parameters
which are specific to api services.

This change splits the defined type to smaller modules so that we can
reuse the implementation.

Because the defined type is not used by any other modules at this
moment, and we don't expect direct usage of these resource type(*1),
this change is backword-incompatible.

(*1)
Technically it can be used but cause multiple conflicts.

Change-Id: If524155bf2d0dda964c6b451d7b26f36481514f5
"
268,puppet-ceph/manifests/rgw/barbican.pp,"rgw: Support Barbican integration settings

Change-Id: I8fef857c55610f33b33a3423a8ec8cebbdde078b
"
269,puppet-ceph/manifests/rgw/keystone.pp,"rgw: Support Barbican integration settings

Change-Id: I8fef857c55610f33b33a3423a8ec8cebbdde078b
"
270,puppet-ceph/manifests/rgw.pp,"rgw: Add support for rgw_enable_apis

... so that users can enable only specific APIs in Ceph object gateway.

Change-Id: I80184a403322e0db6706603aeadb2257b2dd1a35

rgw: support more Swift-related options

This change improves the support coverage of radosgw options, which are
related to Swift API.

Change-Id: I1d544ebcbd77b44c1772d842e021a07e243997d6

rgw: Add suport for the beast frontend library

The beast frontend library has been supported since Mimic and will
replace the civetweb library which was deprecated in Pacific.

This also fixes the rgw_frontneds parameter so that the reasonable
default value is selected according to the frontend type selected.

Change-Id: I2faac0151165aa296ac2df3a0b9a1255654947ef

Remove support for upstart

... because this module no longer supports Ubuntu 14.04 or CentOS 6.

This also removes the unit tests with Ubuntu 14.04.

Change-Id: Ib2bf73ba379b61f96c5faf3712c15aa39c0a301e

rgw: Refactor the logic to support multiple fronend_type

Change-Id: I5c07540be210e05719581cd722fba9e7eb0eeb47
"
271,puppet-ceph/manifests/rgw/beast.pp,"rgw: Add suport for the beast frontend library

The beast frontend library has been supported since Mimic and will
replace the civetweb library which was deprecated in Pacific.

This also fixes the rgw_frontneds parameter so that the reasonable
default value is selected according to the frontend type selected.

Change-Id: I2faac0151165aa296ac2df3a0b9a1255654947ef
"
272,puppet-ceph/manifests/mirror.pp,"Remove support for upstart

... because this module no longer supports Ubuntu 14.04 or CentOS 6.

This also removes the unit tests with Ubuntu 14.04.

Change-Id: Ib2bf73ba379b61f96c5faf3712c15aa39c0a301e
"
273,puppet-ceph/manifests/mon.pp,"Remove support for upstart

... because this module no longer supports Ubuntu 14.04 or CentOS 6.

This also removes the unit tests with Ubuntu 14.04.

Change-Id: Ib2bf73ba379b61f96c5faf3712c15aa39c0a301e
"
274,puppet-ceph/manifests/rgw/apache_proxy_fcgi.pp,"Use integer for apache::vhost::port

The latest puppetlabs-apache release (8.0.0) no longer accepts string
values for apache::vhost::port. This updates the default value to use
integer instead of string, to avoid type validation error.

Related-Bug: #1983300
Change-Id: Ib5714ba5ae3219fbb0500b8d6adabc87541220f7
"
275,puppet-ceph/manifests/init.pp,"Remove workaround for old p-o-i manifest

Now p-o-i uses the native class parameters thus we can define
the parameter resources even when the parametes are not set.

Change-Id: Iefc8126f5ffff55e623dfdaa8e791ba4aafb7831
"
276,puppet-ceph/manifests/repo.pp,"Fix CentOS Stream 9 repo url

Change-Id: Id02b6e67af7a8cab524af86e2d4eab6a6281ed2d

CentOS: Allow fixing repository url for CentOS Stream

URL of SIG repository is different between CentOS and CentOS Stream.
('-stream' prefixes major version)

This change introduces the `stream` parameter which we already added
to openstack_extras so that users can use the correct repository
without defining the whole url by ceph_mirror.

Change-Id: Ibfb4cc4df52cd1318a5497e2ea02c2ca0893331f
"
277,puppet-ceph/manifests/osds.pp,"Deprecated pid_max and remove sysctl module dependency

Change-Id: I39cabf6fc1286c788ba10fc40402db22fdf1652c
"
278,puppet-ceph/manifests/profile/params.pp,"Deprecated pid_max and remove sysctl module dependency

Change-Id: I39cabf6fc1286c788ba10fc40402db22fdf1652c
"
279,puppet-cloudkitty/manifests/wsgi/apache.pp,"Add Apache WSGI logging parameters for pipe/syslog

Add parameters for advanced logging configurations in Apache to
support piped logging and support for syslog (via mod_syslog
available in Apache >= 2.5.0)

Co-Authored-By: Andy Botting <andy@andybotting.com>
Change-Id: Iee4cf4b3e20d16624b89f6b004cc857ed5288510

Merge ""Adapt to new type validation in puppetlabs-apache""
Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: Idd4918618831ffab98db91fa90ae493775373bc9

Expose headers option of apache::vhost

The headers option in apache::vhost is required in some case, for
example when adding the X-XSS-Protection header. This change allows
customizing the option for the api vhost.

This change also adds support for request_headers so that both request
headers and response headers can customized.

Change-Id: I4ff7ea57f9c1b29b2209506969497b773cef02ec

apache+mod_wsgi: Disable SSL by default

During the previous cycle, a warning message was added to inform users
of this change.

Now the default value is updated so that SSL is disabled by default.

Change-Id: I705dabab19974c2d9323e49051c8952e6d537820
"
280,puppet-cloudkitty/manifests/storage.pp,"Remove remaining hard-coded OS user/group

This replaces one remaining hard-coded user which was left by
the previous attempt[1] to remove individual hard-codes.

[1] 4828d650b3c19e96438eaedd10a652b6aaff2aa0

Change-Id: Iba7e9af291621deeca7651ef9f67ddce453180af
"
281,puppet-cloudkitty/manifests/storage/elasticsearch.pp,"Add support for Elasticsearch storage backend

Change-Id: I9b3b74f3c32a43ae982f0c429c95819dc387bf80
"
282,puppet-cloudkitty/manifests/init.pp,"Remove deprecated tenant_fetcher_backend

... because it was deprecated during Victoria cycle[1].

[1] d58a0a25ed2e1b19627bcdb54d81fce63cd3b6b7

Change-Id: I29bbc0bb81d1fbdfd17e82667cee34d786cd1828

Fix typos in parameter descriptions

Change-Id: I865f8778b4efbb84f295ad22b9f9a16828774e44
"
283,puppet-cloudkitty/manifests/ui.pp,"Remove deprecated cloudkitty::ui

This class was deprecated during Yoga cycle[1].

[1] 0f89c9ab8fccbe7840dda5ad5309a12784e417ef

Change-Id: I703934b1b5dcecb01cef100a512a4c30fbf63522

Fix typos in parameter descriptions

Change-Id: I865f8778b4efbb84f295ad22b9f9a16828774e44
"
284,puppet-cloudkitty/manifests/healthcheck.pp,"Fix typos in parameter descriptions

Change-Id: I865f8778b4efbb84f295ad22b9f9a16828774e44
"
285,puppet-cloudkitty/manifests/keystone/auth.pp,"Fix typos in parameter descriptions

Change-Id: I865f8778b4efbb84f295ad22b9f9a16828774e44
"
286,puppet-cloudkitty/manifests/logging.pp,"Fix typos in parameter descriptions

Change-Id: I865f8778b4efbb84f295ad22b9f9a16828774e44
"
287,puppet-cloudkitty/manifests/orchestrator.pp,"Fix typos in parameter descriptions

Change-Id: I865f8778b4efbb84f295ad22b9f9a16828774e44
"
288,puppet-sahara/manifests/wsgi/apache.pp,"Add Apache WSGI logging parameters for pipe/syslog

Add parameters for advanced logging configurations in Apache to
support piped logging and support for syslog (via mod_syslog
available in Apache >= 2.5.0)

Co-Authored-By: Andy Botting <andy@andybotting.com>
Change-Id: If4d8e52c05cb94336318f45fe4a53eaf91a5c880

Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: I043ced8b30b1fc8e2176d201e38bb8b241701641

Expose headers option of apache::vhost

The headers option in apache::vhost is required in some case, for
example when adding the X-XSS-Protection header. This change allows
customizing the option for the api vhost.

This change also adds support for request_headers so that both request
headers and response headers can customized.

Change-Id: I7431b95051d0cb9c35c9bebc07959d6f95b0cd1b

Avoid hard-coding OS user/group in each manifest

and replace hard-codes by definition in params.pp .

Change-Id: I096218782a372ac7573baf0c42cac83d570fb761
"
289,puppet-sahara/manifests/init.pp,"Support options for Designate integration

This change introduces support for the following two options which are
used to configure Designate integration.

 - [DEFAULT] use_designate
 - [DEFAULT] nameservers

Change-Id: I297dadec50b1b65d3c95e8fc6c17ad25b663c12d

Support [DEFAULT] node_domain

Change-Id: Ie778c334afd4919f79db6defcea172e8d1ae33fa
"
290,puppet-sahara/manifests/db/sync.pp,"Avoid hard-coding OS user/group in each manifest

and replace hard-codes by definition in params.pp .

Change-Id: I096218782a372ac7573baf0c42cac83d570fb761
"
291,puppet-sahara/manifests/params.pp,"Avoid hard-coding OS user/group in each manifest

and replace hard-codes by definition in params.pp .

Change-Id: I096218782a372ac7573baf0c42cac83d570fb761
"
292,puppet-vitrage/manifests/wsgi/apache.pp,"Add Apache WSGI logging parameters for pipe/syslog

Add parameters for advanced logging configurations in Apache to
support piped logging and support for syslog (via mod_syslog
available in Apache >= 2.5.0)

Co-Authored-By: Andy Botting <andy@andybotting.com>
Change-Id: Ie6b22e3b0035189bd12499bec42d34c4c80dec6d

Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: Id33d0bb0cd09af5d653c14e50ac6b3c1745593b6

Expose headers option of apache::vhost

The headers option in apache::vhost is required in some case, for
example when adding the X-XSS-Protection header. This change allows
customizing the option for the api vhost.

This change also adds support for request_headers so that both request
headers and response headers can customized.

Change-Id: If7c7341fbe5b61dcbb5762291484ce4097c0239c

apache+mod_wsgi: Disable SSL by default

During the previous cycle, a warning message was added to inform users
of this change.

Now the default value is updated so that SSL is disabled by default.

Change-Id: I72c65b9cdc246df06c2ca4f4e70ea9c3ff4fe768
"
293,puppet-vitrage/manifests/init.pp,"Accept array for [datasource] types

... because the parameter is ListOpt .

Change-Id: I5b46474568e3e6fbe2751e010f00404ba06cbc72
"
294,puppet-vitrage/manifests/notifier.pp,"Simplify handling of notifiers option

Change-Id: I74610eddea1514f25951ec6a793e4b2afff6d59f
"
295,puppet-vitrage/manifests/auth.pp,"Remove deprecated vitrage::auth

... because this class was deprecated during Yoga cycle[1] in favor of
the new vitrage::service_credentials class.

[1] 9cf7f1dcd9c1acb58122dabaf434bf251189bb0a

Change-Id: Ice74b6655d8715989edece54e40998c809f8341f
"
296,puppet-placement/manifests/wsgi/apache.pp,"Fix inconsistent parameter name of wsgi::apache

The placement::wsgi::apache class takes the api_port parameter to
determine the TCP port number, but this name is not commonly used while
the port parameter is used in the other modules. This change fixes
the parameter name so that we can keep the implementation more
consistent.

This also fixes minor differences mainly about formatting.

Change-Id: Ifaed2952e3dc49ee5cde2587bd5f8a35205465fb

apache+mod_wsgi: Allow customizing wsgi process options

This change adds the missing capability to customize wsgi process
options, which is supported by the other modules.

Change-Id: Ia5cff022c1ad4f6402f2e9d4cd039059b176cd93

Add Apache WSGI logging parameters for pipe/syslog

Add parameters for advanced logging configurations in Apache to
support piped logging and support for syslog (via mod_syslog
available in Apache >= 2.5.0)

Co-Authored-By: Andy Botting <andy@andybotting.com>
Change-Id: Ie2f8feadd568565308210d73c2a89b2beef43697

Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: I8f865d33ad289b605c27de58d3accf6717888df8

Expose headers option of apache::vhost

The headers option in apache::vhost is required in some case, for
example when adding the X-XSS-Protection header. This change allows
customizing the option for the api vhost.

This change also adds support for request_headers so that both request
headers and response headers can customized.

Change-Id: I8500d2de47c4f50920336741db5840bc44faca8b

Remove deprecated placement::wsgi::apache::ensure_package

... because it was deprecated during Xena cycle[1].

[1] 20a4abee20d04800fd2c07429ed2256184a33037

Change-Id: I72fa9fbedb446e430d6b54a05c5d6ae491133852

apache+mod_wsgi: Disable SSL by default

During the previous cycle, a warning message was added to inform users
of this change.

Now the default value is updated so that SSL is disabled by default.

Change-Id: I2853800fb6f8ba3276f7702b292386058d3343e2
"
297,puppet-placement/manifests/api.pp,"api: Remove deprecated host/api parameter

... because these were deprecated during Victoria cycle[1] and had no
effect since then.

[1] 14a73aff46a2623bf495391a477d4a8402e7273d

Change-Id: I01a966e504af342a26206fd63788ab5de9c832fc
"
298,puppet-placement/manifests/generic_service.pp,"Do not define service resource when service management is disabled

Change-Id: I83d0b85966210da30a2102e9971fc6d5cf806b66
"
299,puppet-murano/manifests/deps.pp,"Fix dependencies related to openstacklib::policy

Since [1] was merged, not only openstacklib::poliy::base but also
openstacklib::policy::default is included to manage the policy file.
This change ensure openstacklib::policy::default is executed after
the packages are installed.

[1] 740d1bb822e8543535a2fccb4f2eab4b5809422c

Change-Id: I648ae1113f57f5cd085e8240af74a3c5750b58dc
"
300,puppet-murano/manifests/init.pp,"Fix some typos in parameter descriptions

Change-Id: I2965b9dee20b62582fa0ce5c22111ee8b0b99761

Remove deprecated database_min_pool_size

... because it was deprecated during Ussuri cycle.

Change-Id: If2f22dc1d121375367d699d884f4a9efb623e45f

Create a separate class to manage authtoken parameters

Change-Id: Iab27f6be5d1356963a5eec95bfca25e10ebc3508
"
301,puppet-murano/manifests/keystone/auth.pp,"Fix some typos in parameter descriptions

Change-Id: I2965b9dee20b62582fa0ce5c22111ee8b0b99761

Accept system scope credentials for Keystone API request

This change is the first step to support secure RBAC and allows usage
of system scope credentials for Keystone API request.

This change covers the following two items.
 - assignment of system scope roles to system user
 - credential parameters for authtoken middleware

Depends-on: https://review.opendev.org/804325
Change-Id: Iac29be6b05aebe3fb62e7d63c88342d715903165
"
302,puppet-murano/manifests/keystone/cfapi_auth.pp,"Fix some typos in parameter descriptions

Change-Id: I2965b9dee20b62582fa0ce5c22111ee8b0b99761

Accept system scope credentials for Keystone API request

This change is the first step to support secure RBAC and allows usage
of system scope credentials for Keystone API request.

This change covers the following two items.
 - assignment of system scope roles to system user
 - credential parameters for authtoken middleware

Depends-on: https://review.opendev.org/804325
Change-Id: Iac29be6b05aebe3fb62e7d63c88342d715903165
"
303,puppet-murano/manifests/logging.pp,"Fix some typos in parameter descriptions

Change-Id: I2965b9dee20b62582fa0ce5c22111ee8b0b99761
"
304,puppet-murano/manifests/logging_cfapi.pp,"Fix some typos in parameter descriptions

Change-Id: I2965b9dee20b62582fa0ce5c22111ee8b0b99761
"
305,puppet-murano/manifests/keystone/authtoken.pp,"Accept system scope credentials for Keystone API request

This change is the first step to support secure RBAC and allows usage
of system scope credentials for Keystone API request.

This change covers the following two items.
 - assignment of system scope roles to system user
 - credential parameters for authtoken middleware

Depends-on: https://review.opendev.org/804325
Change-Id: Iac29be6b05aebe3fb62e7d63c88342d715903165

Create a separate class to manage authtoken parameters

Change-Id: Iab27f6be5d1356963a5eec95bfca25e10ebc3508
"
306,puppet-murano/manifests/db_cfapi.pp,"Deprecate remaining [database] idle_timeout

... because support by puppet-oslo was deprecated several cycles ago
by [1] and the parameter has had no effect since then.

[1] 3eb0e709473d53bc9a26c672c10486828d84d50f

Change-Id: I0fa2d0f171113a0cd176138eec8ecffaa584f776

Remove deprecated database_min_pool_size

... because it was deprecated during Ussuri cycle.

Change-Id: If2f22dc1d121375367d699d884f4a9efb623e45f
"
307,puppet-murano/manifests/db.pp,"Remove deprecated database_min_pool_size

... because it was deprecated during Ussuri cycle.

Change-Id: If2f22dc1d121375367d699d884f4a9efb623e45f
"
308,puppet-murano/manifests/dashboard.pp,"Remove usage of custom os_package_type fact

Currently we support usage of distro packages only, and this custom
fact can be simply replaced by the default fact.

Change-Id: Id544dc2bb4f8e7424b259050e44f403c68f80eb8
"
309,puppet-tempest/manifests/init.pp,"Remove cleanup of old parameter usage

The cleanup logic was added during the previous cycle[1], thus can be
removed now.

[1] 6b9b452e67832cc1d2a19bebdc107f53b7c07721

Change-Id: I0218674acdbe605838b516724309edc279600c67

Remove deprecated parameter for whitebox tempest plugin

... because it was deprecated during the previous cycle by [1].

[1] 9f2d6ea65016f65e9ed21df8353fac0fb81ae369

Change-Id: Iacb4a192fbd1573d89f62890bc0ef80998e41cd3

Merge ""Fix missing parameters for heat-tempest-plugin""
Add basic manila-tempest-plugin options

This change introduces a few basic manila-tempest-plugin options which
are required to test Manila in integration jobs.

Change-Id: I76fc72f37a9237f023eb58b37f4b67e698c440f9

Support manila-tempest-plugin

This change adds the initial support for manila-tempest-plugin, and
introduces the new manila_available parameter which determines whether
the plugin package should be installed and enabled.

Change-Id: I116356b39e22625d8ab87d582e3d0cd54d6b85fc

Fix missing parameters for heat-tempest-plugin

heat-tempest-plugin requires a few parameters in the dedicated
[heat_plugin] section. This change adds initial support for these
parameters  so that heat-tempest-plugin tests can be executed properly.

Closes-Bug: #1963659
Change-Id: I003f421726f3285a8cca7949896eb63cb6025169

Add support for domain parameters

This change allows configuring *_domain_name parameters for the pre-
created non-admin credentials.

Change-Id: I5af53ea4d1d28cefcf84a3437c34b96bc6a102a2

Merge ""Allow arbitrary section name for *_id_setter""
Merge ""Deprecate a parameter for whitebox-tempest-plugin""
Deprecate a parameter for whitebox-tempest-plugin

The plugin has never been supported by puppet-tempest. Also, currently
no distribution provides the package.

Change-Id: Ib87b5f44134adefea92d73dd91276de6773e9bab

Allow arbitrary section name for *_id_setter

... so that we can set the parameters in different sections.
(eg. [database] db_flavor_ref instead of [compute] db_flavor_ref )

Implementation to inject parameters to tempset.conf is replaced by
the tempest_config type and the ini_setting provider, so that we can
use the consistent implementation to modify tempest.conf .

This change also fixes ""flapping"" of database/db_flavor_ref. Now
the parameter is removed by the initial tempest_config resource then
set by the tempest_glance_id_setter, when db_flavor_name is used.

Closes-Bug: #1978848
Change-Id: Ife2c563213b9b4118d3925192a2ff45253bcee2b

Accept array value for [dns] nameservers

... because the parameter is a ListOpt.

Change-Id: I8337435e244b74a2d6dcbec513e807c043f779a7

Merge ""Accept array for [network-feature-enabled] api_extensions""
Merge ""Remove clean up for [compute] image_alt_ssh_user""
Merge ""Add support for [scenario] img_disk_format"""
310,puppet-tempest/manifests/params.pp,"Support manila-tempest-plugin

This change adds the initial support for manila-tempest-plugin, and
introduces the new manila_available parameter which determines whether
the plugin package should be installed and enabled.

Change-Id: I116356b39e22625d8ab87d582e3d0cd54d6b85fc

CentOS: Do not install packages without tempest tests

It turned out the following two packages do not provide any tempest
tests.
 - python3-neutron-vpnaas-tests
 - python3-neutron-dynamic-routing-tests

This change removes these two packages from the list of plugin packages
installed, because these are not really used.

Change-Id: I55c973ec43bc9cdbc5db8c476d39ae09b9c00fe5

CentOS: Install package for glance-tempest-plugin

Now RDO ships the python3-glance-tests-tempest package, which actually
provides the glance-tempest-plugin code. This change ensures the plugin
package is installed when Glance is enabled.

Related-Bug: #1969361
Change-Id: Ied266b2bf27f4f1cc37c799019d5fa0b79c6749e
"
311,puppet-zaqar/manifests/wsgi/apache.pp,"Use standard parameter description format for wsgi::apache

Currently parameter description of the <module>::wsgi::apache classes
are formatted differently in individual modules, and this is making
the maintenance effort quite difficult.

This change updates the description format following the standard one
we are globally using in our modules to reduce undesired differences
between modules.

Change-Id: I73044b81e5ea8b41693718c3f3b900237300698e

Fix typos in parameter descriptions

Change-Id: I79e28bffadce8b140896b7304addf1c6cb9d0ebe

Add Apache WSGI logging parameters for pipe/syslog

Add parameters for advanced logging configurations in Apache to
support piped logging and support for syslog (via mod_syslog
available in Apache >= 2.5.0)

Co-Authored-By: Andy Botting <andy@andybotting.com>
Change-Id: If07cac9bc41d173baeadbefb4dad3612c32ee369

Adapt to new type validation in puppetlabs-apache

The puppetlabs-apache module is enforcing more strict data type
validation[1].

This change updates the default values to adapt to that change.

[1] https://github.com/puppetlabs/puppetlabs-apache/commit/f41251e336fa3e7c31c19968ccee74121cf71e47

Closes-Bug: #1983300
Depends-on: https://review.opendev.org/851652
Change-Id: Ic4160b208ff1d728cab2b77c9261cb18deec8c27

Expose headers option of apache::vhost

The headers option in apache::vhost is required in some case, for
example when adding the X-XSS-Protection header. This change allows
customizing the option for the api vhost.

This change also adds support for request_headers so that both request
headers and response headers can customized.

Change-Id: Ie5f2669a8686a3546b652251881615e0e18bf433

apache+mod_wsgi: Disable SSL by default

During the previous cycle, a warning message was added to inform users
of this change.

Now the default value is updated so that SSL is disabled by default.

Change-Id: I17cd1a7adcc09168d3f53f44787858ef1d89a0a7

Avoid hard-coding OS user/group in each manifest

and replace hard-codes by definition in params.pp .

Change-Id: Iadd122b33ac826902468541263f87176a556bd30
"
312,puppet-zaqar/manifests/logging.pp,"Fix typos in parameter descriptions

Change-Id: I79e28bffadce8b140896b7304addf1c6cb9d0ebe
"
313,puppet-zaqar/manifests/keystone/auth_websocket.pp,"Remove deprecated parameters for websocket service user

... because these parameters were deprecated during Yoga cycle[1] and
have had no effect since then.

[1] 7eeb46e04d61189925dbbaa06d3016a0235d6200

Change-Id: I6b2ee2e3e9fb633f5f3c6fa9b2e4106e5430484e

Fix missing updates of deprecated parameters

This is follow-up of 7eeb46e04d61189925dbbaa06d3016a0235d6200 and fixes
the following two points.
 - tenant_name is deprecated but a proper warning message is missing
 - password is deprecated and now is optional, but it is still
   validated

Closes-Bug: #1973315
Change-Id: I169d42dee4896843e55d4989dc440ad7e7c7ec94
"
314,puppet-zaqar/manifests/db/sync.pp,"Avoid hard-coding OS user/group in each manifest

and replace hard-codes by definition in params.pp .

Change-Id: Iadd122b33ac826902468541263f87176a556bd30
"
315,puppet-zaqar/manifests/params.pp,"Avoid hard-coding OS user/group in each manifest

and replace hard-codes by definition in params.pp .

Change-Id: Iadd122b33ac826902468541263f87176a556bd30
"
316,puppet-tacker/manifests/server.pp,"Support more parameters to define/tune api behavior

Change-Id: Ic05d0cddfaccab6759b4d587e0fbc0bcff01977b

Ensure [DEFAULT] auth_strategy is set

This change ensures the [DEFAULT] auth_strategy is set. Otherwise
setting the parameter to non-default value doesn't take any effect.

Change-Id: I3fddb08c83dc6bbf10d395c8601e9982de79954f
"
317,puppet-tacker/manifests/db/sync.pp,"Avoid hard-coding OS user/group in each manifest

and replace hard-codes by definition in params.pp .

Change-Id: I58513948f3501a97c04e9fa1474d6e944cf830d2
"
318,puppet-tacker/manifests/params.pp,"Avoid hard-coding OS user/group in each manifest

and replace hard-codes by definition in params.pp .

Change-Id: I58513948f3501a97c04e9fa1474d6e944cf830d2
"
319,puppet-tacker/manifests/config.pp,"Allow customizing api-paste.ini file

This change introduces a new resource type and the corresponding puppet
parameter to allow managing records in api-paste.ini.

Change-Id: I92df917887da3220dfb7c7ed10fac123f01af1aa
"
320,puppet-tacker/manifests/deps.pp,"Allow customizing api-paste.ini file

This change introduces a new resource type and the corresponding puppet
parameter to allow managing records in api-paste.ini.

Change-Id: I92df917887da3220dfb7c7ed10fac123f01af1aa
"
321,puppet-tacker/manifests/db.pp,"Remove deprecated database_min_pool_size

... because it was deprecated during Ussuri cycle.

Change-Id: I96f9a5df709f2b4ed0fbcbe6a3e3831d99d983c5
"
322,puppet-ec2api/manifests/api.pp,"Ensure [DEFAULT] ssl_insecure is removed by default

... instead of leaving the parameter unmanaged.

Change-Id: Ic549c6f05e55d4b1249a2c068935b26cae81401b

Fix typos in parameter descriptions

Change-Id: I145c1230a44e352d180a0286865ee1e81ef00c7d

Remove deprecated use_tpool parameter

... because it was deprecated during Yoga cycle[1].

[1] 1b1e2eb80943ffab29b7efc46f5907096806926c

Change-Id: I51c0e0f0519a3802adecc8473640bbb5219d87b6

Replace deprecated [DEFAULT] ssl_* parameters

The ssl_* parameters in the [DEFAULT] sections were deprecated and
the [ssl] parameters should be used instead[1].

[1] 2e2940d1e17706b9d6367ff1783bde9d41891bfa

Change-Id: If5ee27626b778bda4d8cb47162691f3cced35955

Deprecate support for [DEFAULT] ssl_insecure

... because the parameter was already removed[1].

The ssl_ca_file parameter is left because it is still used by
the oslo_service library.

[1] 5fc752ca6fd1588cc04f3073d1c300d985581041

Change-Id: Ia1035589c68790239c6619f4f3f9b33d7b5ae66a

Deprecate use_tpool parameter

The [DEFAULT] use_tpool parameter has been deprecated in favor of
the new [database] use_tpool parameter. Also, even the new parameter
has been deprecated by during Xena release[2].

[2] 74c6bf266e0b86ceb4726cad9268f134d423bae8

Change-Id: I93fabb8d131e51c18f4a5220f2f0f47ad318bb58
"
323,puppet-ec2api/manifests/cache.pp,"Fix typos in parameter descriptions

Change-Id: I145c1230a44e352d180a0286865ee1e81ef00c7d

Merge ""Add socket keepalive options for the pymemcache backend"""
324,puppet-ec2api/manifests/keystone/auth.pp,"Fix typos in parameter descriptions

Change-Id: I145c1230a44e352d180a0286865ee1e81ef00c7d
"
325,puppet-ec2api/manifests/logging.pp,"Fix typos in parameter descriptions

Change-Id: I145c1230a44e352d180a0286865ee1e81ef00c7d
"
326,puppet-ec2api/manifests/db/sync.pp,"Avoid hard-coding OS user/group in each manifest

and replace hard-codes by definition in params.pp .

Change-Id: I9c96dc528b86ab8243fffcf408e09876960f882f
"
327,puppet-ec2api/manifests/params.pp,"Avoid hard-coding OS user/group in each manifest

and replace hard-codes by definition in params.pp .

Change-Id: I9c96dc528b86ab8243fffcf408e09876960f882f
"
328,puppet-pacemaker/manifests/stonith/fence_watchdog.pp,"Add fence_watchdog (sbd) stonith agent

This commit adds a new stonith agent ""fence_watchdog"", allowing
operators to define a stonith device called ""watchdog"" (name is
hard coded in pacemaker) and eventually add this to the clusters
stonith topology.

Since this is a special dummy stonith device it is exempted from
having a constraint rule preventing it from running on the same
cluster nodes that is in charge of monitoring.

The ""watchdog"" resource needs the sbd daemon to be enabled and
depends on a valid watchdog timer device - either phisical or
virtual - to perform self-fencing when required.

Change-Id: Id010a392df0047d53dfab1c21cc78021c8c1aabf
"
329,puppet-pacemaker/manifests/stonith/fence_redfish.pp,"Add fence_watchdog (sbd) stonith agent

This commit adds a new stonith agent ""fence_watchdog"", allowing
operators to define a stonith device called ""watchdog"" (name is
hard coded in pacemaker) and eventually add this to the clusters
stonith topology.

Since this is a special dummy stonith device it is exempted from
having a constraint rule preventing it from running on the same
cluster nodes that is in charge of monitoring.

The ""watchdog"" resource needs the sbd daemon to be enabled and
depends on a valid watchdog timer device - either phisical or
virtual - to perform self-fencing when required.

Change-Id: Id010a392df0047d53dfab1c21cc78021c8c1aabf

Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
330,puppet-pacemaker/manifests/stonith/fence_rhevm.pp,"Add fence_watchdog (sbd) stonith agent

This commit adds a new stonith agent ""fence_watchdog"", allowing
operators to define a stonith device called ""watchdog"" (name is
hard coded in pacemaker) and eventually add this to the clusters
stonith topology.

Since this is a special dummy stonith device it is exempted from
having a constraint rule preventing it from running on the same
cluster nodes that is in charge of monitoring.

The ""watchdog"" resource needs the sbd daemon to be enabled and
depends on a valid watchdog timer device - either phisical or
virtual - to perform self-fencing when required.

Change-Id: Id010a392df0047d53dfab1c21cc78021c8c1aabf

Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
331,puppet-pacemaker/manifests/resource/ip.pp,"Expose run_arping to control IP collisions detection

The IPaddr2 resource-agent offers the option to run arping
for IPv4 collision detection.
This commit exposes the run_arping parameter, allowing operators
to eventually enable it via hieradata setting:

pacemaker::resource::ip::run_arping: true


Change-Id: I912080a8a9b8002e96d5e37f8e3dfda13f4250db

Replace hiera by lookup

The hiera function is deprecated and does not work with the latest
hieradata version 5. It should be replaced by the new lookup
function[1].

[1] https://puppet.com/docs/puppet/7/hiera_automatic.html

With the lookup function, we can define value type and merge behavior,
but these are kept default at this moment to limit scope of this change
to just simple replacement. Adding value type might be useful to make
sure the value is in expected type (especially when a boolean value is
expected), but we will revisit that later.

example:
lookup(<NAME>, [<VALUE TYPE>], [<MERGE BEHAVIOR>], [<DEFAULT VALUE>])

Change-Id: If206d72caf78cb3a524a1b8eb9ad4399ee4e3ce0

Replace the deprecated is_ipv6_address function

The is_ipv6_address function in puppetlabs-stdlib is deprecated since
4.13.0[1] and usage of the function shows the warning message.

[1] https://github.com/puppetlabs/puppetlabs-stdlib/commit/6d185bdaa19f698270a0df4b0a0c05618864b955

Change-Id: If4e2277781711ca96b7ddc2bb8d3115107940a4d
"
332,puppet-pacemaker/manifests/resource/bundle.pp,"Avoid pick_default to detect promoted_max

This fixes the regression caused by [1], and avoid usage of
pick_default, which converts undef to an empty string ('').

Usage of an empty string causes type validation failure later when
the pcmk_bundle resource is defined.

[1] c332d43db6b81d44f56a5a4a67d9988df763b4de

Closes-Bug: #1995565
Change-Id: Ib909f45b237a478119d4f90ce9f7b752668bad9d

bundle: Refactor handling of masters/promoted_max

... to avoid the following warning message.

  Warning: Unknown variable: 'used_promoted_max'.

Change-Id: I9a1f5e2c6d5ef655f3dc681bb10c7ff9e4281c49

Replace hiera by lookup

The hiera function is deprecated and does not work with the latest
hieradata version 5. It should be replaced by the new lookup
function[1].

[1] https://puppet.com/docs/puppet/7/hiera_automatic.html

With the lookup function, we can define value type and merge behavior,
but these are kept default at this moment to limit scope of this change
to just simple replacement. Adding value type might be useful to make
sure the value is in expected type (especially when a boolean value is
expected), but we will revisit that later.

example:
lookup(<NAME>, [<VALUE TYPE>], [<MERGE BEHAVIOR>], [<DEFAULT VALUE>])

Change-Id: If206d72caf78cb3a524a1b8eb9ad4399ee4e3ce0
"
333,puppet-pacemaker/manifests/resource/filesystem.pp,"Replace hiera by lookup

The hiera function is deprecated and does not work with the latest
hieradata version 5. It should be replaced by the new lookup
function[1].

[1] https://puppet.com/docs/puppet/7/hiera_automatic.html

With the lookup function, we can define value type and merge behavior,
but these are kept default at this moment to limit scope of this change
to just simple replacement. Adding value type might be useful to make
sure the value is in expected type (especially when a boolean value is
expected), but we will revisit that later.

example:
lookup(<NAME>, [<VALUE TYPE>], [<MERGE BEHAVIOR>], [<DEFAULT VALUE>])

Change-Id: If206d72caf78cb3a524a1b8eb9ad4399ee4e3ce0
"
334,puppet-pacemaker/manifests/resource/lsb.pp,"Replace hiera by lookup

The hiera function is deprecated and does not work with the latest
hieradata version 5. It should be replaced by the new lookup
function[1].

[1] https://puppet.com/docs/puppet/7/hiera_automatic.html

With the lookup function, we can define value type and merge behavior,
but these are kept default at this moment to limit scope of this change
to just simple replacement. Adding value type might be useful to make
sure the value is in expected type (especially when a boolean value is
expected), but we will revisit that later.

example:
lookup(<NAME>, [<VALUE TYPE>], [<MERGE BEHAVIOR>], [<DEFAULT VALUE>])

Change-Id: If206d72caf78cb3a524a1b8eb9ad4399ee4e3ce0
"
335,puppet-pacemaker/manifests/resource/ocf.pp,"Replace hiera by lookup

The hiera function is deprecated and does not work with the latest
hieradata version 5. It should be replaced by the new lookup
function[1].

[1] https://puppet.com/docs/puppet/7/hiera_automatic.html

With the lookup function, we can define value type and merge behavior,
but these are kept default at this moment to limit scope of this change
to just simple replacement. Adding value type might be useful to make
sure the value is in expected type (especially when a boolean value is
expected), but we will revisit that later.

example:
lookup(<NAME>, [<VALUE TYPE>], [<MERGE BEHAVIOR>], [<DEFAULT VALUE>])

Change-Id: If206d72caf78cb3a524a1b8eb9ad4399ee4e3ce0
"
336,puppet-pacemaker/manifests/resource/remote.pp,"Replace hiera by lookup

The hiera function is deprecated and does not work with the latest
hieradata version 5. It should be replaced by the new lookup
function[1].

[1] https://puppet.com/docs/puppet/7/hiera_automatic.html

With the lookup function, we can define value type and merge behavior,
but these are kept default at this moment to limit scope of this change
to just simple replacement. Adding value type might be useful to make
sure the value is in expected type (especially when a boolean value is
expected), but we will revisit that later.

example:
lookup(<NAME>, [<VALUE TYPE>], [<MERGE BEHAVIOR>], [<DEFAULT VALUE>])

Change-Id: If206d72caf78cb3a524a1b8eb9ad4399ee4e3ce0
"
337,puppet-pacemaker/manifests/resource/route.pp,"Replace hiera by lookup

The hiera function is deprecated and does not work with the latest
hieradata version 5. It should be replaced by the new lookup
function[1].

[1] https://puppet.com/docs/puppet/7/hiera_automatic.html

With the lookup function, we can define value type and merge behavior,
but these are kept default at this moment to limit scope of this change
to just simple replacement. Adding value type might be useful to make
sure the value is in expected type (especially when a boolean value is
expected), but we will revisit that later.

example:
lookup(<NAME>, [<VALUE TYPE>], [<MERGE BEHAVIOR>], [<DEFAULT VALUE>])

Change-Id: If206d72caf78cb3a524a1b8eb9ad4399ee4e3ce0
"
338,puppet-pacemaker/manifests/resource/service.pp,"Replace hiera by lookup

The hiera function is deprecated and does not work with the latest
hieradata version 5. It should be replaced by the new lookup
function[1].

[1] https://puppet.com/docs/puppet/7/hiera_automatic.html

With the lookup function, we can define value type and merge behavior,
but these are kept default at this moment to limit scope of this change
to just simple replacement. Adding value type might be useful to make
sure the value is in expected type (especially when a boolean value is
expected), but we will revisit that later.

example:
lookup(<NAME>, [<VALUE TYPE>], [<MERGE BEHAVIOR>], [<DEFAULT VALUE>])

Change-Id: If206d72caf78cb3a524a1b8eb9ad4399ee4e3ce0
"
339,puppet-pacemaker/manifests/resource/systemd.pp,"Replace hiera by lookup

The hiera function is deprecated and does not work with the latest
hieradata version 5. It should be replaced by the new lookup
function[1].

[1] https://puppet.com/docs/puppet/7/hiera_automatic.html

With the lookup function, we can define value type and merge behavior,
but these are kept default at this moment to limit scope of this change
to just simple replacement. Adding value type might be useful to make
sure the value is in expected type (especially when a boolean value is
expected), but we will revisit that later.

example:
lookup(<NAME>, [<VALUE TYPE>], [<MERGE BEHAVIOR>], [<DEFAULT VALUE>])

Change-Id: If206d72caf78cb3a524a1b8eb9ad4399ee4e3ce0
"
340,puppet-pacemaker/manifests/new/params.pp,"Do not install fence-agent packages in base manifests

... because the required package is pulled by individual resource
types to manage stonith resources.

Related-Bug: #1958653
Change-Id: I5183c6977002a7be0d6f3c03670205bc11334658

Only install required/supported fence agents

This change replaces fence-agents-all package to fence-agents-redfish,
fence-agents-ipmilan, fence-agents-kdump and fence-agents-rhevm.

The same is proposed in
https://review.opendev.org/c/openstack/tripleo-puppet-elements/+/818184

This change also fixes failure in unit tests, caused by the following
warning message shown by the pcs command.

Warning: stonith option 'passwd' is deprecated and should not be used,
use 'password' instead

Closes-Bug: #1955559
Related-Bug: #1955572
Signed-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>
Change-Id: I8f5c04cea4afb8f46a8da5ab639ac984bac36cca
"
341,puppet-pacemaker/manifests/params.pp,"Do not install fence-agent packages in base manifests

... because the required package is pulled by individual resource
types to manage stonith resources.

Related-Bug: #1958653
Change-Id: I5183c6977002a7be0d6f3c03670205bc11334658

Only install required/supported fence agents

This change replaces fence-agents-all package to fence-agents-redfish,
fence-agents-ipmilan, fence-agents-kdump and fence-agents-rhevm.

The same is proposed in
https://review.opendev.org/c/openstack/tripleo-puppet-elements/+/818184

This change also fixes failure in unit tests, caused by the following
warning message shown by the pcs command.

Warning: stonith option 'passwd' is deprecated and should not be used,
use 'password' instead

Closes-Bug: #1955559
Related-Bug: #1955572
Signed-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>
Change-Id: I8f5c04cea4afb8f46a8da5ab639ac984bac36cca
"
342,puppet-pacemaker/manifests/corosync.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760

Fix idempotency regex during scale-up check

When a new node must be added in the cluster, an Exec resource
calls pcs, only if the node is not already present in the cluster.
The current regex doesn't match pcs' output because of a
unecessary beg-of-line marker, so fix it accordingly.

Change-Id: Ie0f549ba968f4f11b30705cc9c80856186dfccda
Closes-Bug: #1950294

Make sure we wait for the cluster before setting resource_default_op

Same as all other resources, we need to make sure the cluster is up
before trying to create resource defaults ops.

Change-Id: Ic85628f8844ded5584d90b4848d86961902d204c

Fix up cluster_setup_extras usage

This pairs with https://review.opendev.org/c/openstack/puppet-tripleo/+/739933.

Starting with pcs 0.10 (CentOS/RHEL 8) the arguments to pcs cluster setup changed completely
in an incompatible way and in fact are ignored by puppet-pacemaker.

This review makes sure ${cluster_setup_extras_real} is taken into account when the cluster
is set up via pcs 0.10, addressing LP#1886789.

Related-Bug: #1886789
Change-Id: I1dc3a72a51a4f816bb79986e845798d869223ffe
"
343,puppet-pacemaker/manifests/install.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
344,puppet-pacemaker/manifests/remote.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
345,puppet-pacemaker/manifests/stonith/fence_apc.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
346,puppet-pacemaker/manifests/stonith/fence_apc_snmp.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
347,puppet-pacemaker/manifests/stonith/fence_bladecenter.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
348,puppet-pacemaker/manifests/stonith/fence_brocade.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
349,puppet-pacemaker/manifests/stonith/fence_cisco_mds.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
350,puppet-pacemaker/manifests/stonith/fence_cisco_ucs.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
351,puppet-pacemaker/manifests/stonith/fence_compute.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
352,puppet-pacemaker/manifests/stonith/fence_drac5.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
353,puppet-pacemaker/manifests/stonith/fence_eaton_snmp.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
354,puppet-pacemaker/manifests/stonith/fence_eps.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
355,puppet-pacemaker/manifests/stonith/fence_hpblade.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
356,puppet-pacemaker/manifests/stonith/fence_ibmblade.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
357,puppet-pacemaker/manifests/stonith/fence_idrac.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
358,puppet-pacemaker/manifests/stonith/fence_ifmib.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
359,puppet-pacemaker/manifests/stonith/fence_ilo.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
360,puppet-pacemaker/manifests/stonith/fence_ilo2.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
361,puppet-pacemaker/manifests/stonith/fence_ilo3.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
362,puppet-pacemaker/manifests/stonith/fence_ilo4.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
363,puppet-pacemaker/manifests/stonith/fence_ilo_mp.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
364,puppet-pacemaker/manifests/stonith/fence_imm.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
365,puppet-pacemaker/manifests/stonith/fence_intelmodular.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
366,puppet-pacemaker/manifests/stonith/fence_ipdu.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
367,puppet-pacemaker/manifests/stonith/fence_ipmilan.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
368,puppet-pacemaker/manifests/stonith/fence_kdump.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
369,puppet-pacemaker/manifests/stonith/fence_rsb.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
370,puppet-pacemaker/manifests/stonith/fence_scsi.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
371,puppet-pacemaker/manifests/stonith/fence_virt.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
372,puppet-pacemaker/manifests/stonith/fence_vmware_soap.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
373,puppet-pacemaker/manifests/stonith/fence_wti.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
374,puppet-pacemaker/manifests/stonith/fence_xvm.pp,"Fix duplicate declaration of package resource

This change replaces ensure_resource('package', ... ) by
ensure_packages, which automatically converts ensure value to avoid
conflict caused by present vs installed.

Also, the ignored pacemaker::install::ensure is fixed by this change.

Closes-Bug: #1958653
Change-Id: I0cb2e32bbfcd056f4429b03d7ba67aaff8a5a760
"
375,puppet-pacemaker/manifests/stonith/fence_kubevirt.pp,"Support fence_kubevirt apiversion parameter

Add apiversion parameter support added in fence_kubevirt via:
https://github.com/ClusterLabs/fence-agents/pull/433

Change-Id: I837474c42592683dc4fffbe787e00fa2e15efb91

Add support for fence_kubevirt fencing agent

This adds support for new fence_kubevirt kubevirt (CNV)
fencing agent, where CNV virtual machines acting as cluster nodes:
https://github.com/ClusterLabs/fence-agents/pull/412

Change-Id: I18fd2297063c7157d6b743c7fc9c161bf23dca39
"
376,puppet-vswitch/manifests/dpdk.pp,"Merge ""Add support for other_config:vhost-postcopy-support""
Merge ""Allow configuring PMD Auto Load Balancing""
Merge ""Ensure boolean values""
Add support for other_config:vhost-postcopy-support

ovs v2.12.0 introduced the option to enable postcopy support[1]. This
adds the capability to manage the option.

[1] https://github.com/openvswitch/ovs/commit/30e834dcb5
Change-Id: Ie295a8207fdac4afb4eff37fe4eb49b3c942ea77

Allow configuring PMD Auto Load Balancing

This change introduces a few parameters to enable and configure PMD
Auto Load Balancing feature in ovs-dpdk.

Change-Id: Idec390b4b01a2f79cbd885fd83c8bf902c9816e7

Ensure boolean values

The current logic to handle the following three parameters expect
these accept boolean values and can misbehave if non-boolean value is
passed.
 - enable_hw_offload
 - disable_emc
 - enable_tso

This change introduces additional validation to ensure boolean values
are passed.

Change-Id: I5eb4a151c74011c7ad451675bdfd8f9616d0770c

Remove usage of $::os_service_default

... because it was deprecated during Yoga cycle by [1].

[1] fb9a08d9726b79d2dcca34dab00150a1b62ef529

Change-Id: I16ed985cc1eee3c923bcd1e5ecdc2266658bed8c

Fix typos in parameter description and test

Change-Id: Ifbf562a2e7876b92d2b54ec5ee99b43e526c6d7a

Merge ""Remove redundant implementation / warning""
Remove redundant implementation / warning

This change removes the redundant implementation introduced by
fb9a08d9726b79d2dcca34dab00150a1b62ef529, which causes duplicate
warning messages.

Change-Id: I7a3917142854c77d24524654a093be1620101032

dpdk: TSO support

This change allows users to enable TSO support[1] in ovs-dpdk datapath.

[1] https://docs.openvswitch.org/en/latest/topics/userspace-tso/

Change-Id: Ib88dbcfc78e703a4249b942938c0f985f826b5b4

dpdk: Create port and bridge after openvswitch service is configured

This change ensures that vs_port resources and vs_bridge resources
are invoked after the openvswitch service is started, when ovs-dpdk is
used instead of normal ovs.

Dependency management is refactored to use the autorequire definition
of resource types.

Change-Id: If2d062823955b9df30d4a980166d7ab0a18f4b5d
"
377,puppet-vswitch/manifests/ovs.pp,"Merge ""Ensure boolean values""
Ensure boolean values

The current logic to handle the following three parameters expect
these accept boolean values and can misbehave if non-boolean value is
passed.
 - enable_hw_offload
 - disable_emc
 - enable_tso

This change introduces additional validation to ensure boolean values
are passed.

Change-Id: I5eb4a151c74011c7ad451675bdfd8f9616d0770c

Remove usage of $::os_service_default

... because it was deprecated during Yoga cycle by [1].

[1] fb9a08d9726b79d2dcca34dab00150a1b62ef529

Change-Id: I16ed985cc1eee3c923bcd1e5ecdc2266658bed8c

Fix typos in parameter description and test

Change-Id: Ifbf562a2e7876b92d2b54ec5ee99b43e526c6d7a

Merge ""dpdk: Create port and bridge after openvswitch service is configured""
dpdk: Create port and bridge after openvswitch service is configured

This change ensures that vs_port resources and vs_bridge resources
are invoked after the openvswitch service is started, when ovs-dpdk is
used instead of normal ovs.

Dependency management is refactored to use the autorequire definition
of resource types.

Change-Id: If2d062823955b9df30d4a980166d7ab0a18f4b5d

Remove remaining parameter for Dynamic Kernel Module Support

... because it was deprecated during Yoga cycle[1] and has had no
effect since then.

[1] 3ff72b5736d94ff32535ab345df4cb588c95286f

Change-Id: I7a24045ee414a0ae81aa7093621ce07d791e5e31
"
378,puppet-vswitch/manifests/params.pp,"Remove unused ovs_dkms_package_name

This was used when Debian required the openvswitch-datapath-dkms
package but the package was removed long time ago.

Installation of that package was disabled by [1]. The logic to install
the package was completely removed by [2] and now it is no longer used.

[1] f4d19a7a07eb71034f92d283b598f753fc5ec560
[2] 3ff72b5736d94ff32535ab345df4cb588c95286f

Change-Id: Id4133d74bfed217ca8a58f136d665d76cc233fb0
"
379,puppet-openstack_extras/manifests/repo/redhat/params.pp,"CentOS: Switch default to zed release

Change-Id: I05326c3231cb1ca2186731afa249e1cbdf1184d9

Remove logics for CentOS 8

.... because CentOS 8 (Stream) is no longer supported.

Change-Id: I16fdf7a5685f6dc8371bed3800dfc26d7f1536ec

cs9: Fix URL for OpenStack packages

CentOS Stream 9 packages are hosted at mirror.stream.centos.org instead
of mirror.centos.org. Also the directory structure is a bit different
in the new mirror server.

Closes-Bug: #1978332
Change-Id: Ie8436a527fc308b70a7c3b34fb86a32604f836ff

CentOS: Switch to yoga release

Change-Id: I77f2b1e229dc9b6cd84bc0dddcfbf9582b7312dc

cs9: Do not enable advanced virtualization repository

The advanced virtualization repository is not available for CentOS
Stream 9. This change disables the repository by default accordingly.

Closes-Bug: #1969484
Change-Id: If888cf4f37a625f54ba89ae40a4f30e76c11987e
"
380,puppet-openstack_extras/manifests/repo/redhat/redhat.pp,"CentOS: Remove deprecated parameters

These parameters were deprecated during the past cycles and have no
effect since support for CentOS 8 has been completely removed.

Change-Id: I46cf7b3ae2e2d0cc8521653a1eba5ddb20d7e0eb

Remove deprecated manage_priorities

... because it was deprecated during Xena cycle[1].

[1] edf439e71c15a5f50f09957a48148e2c4357aa5a

Change-Id: Ia680bdce8e548996f577e76dbf2823f2ddda5b25

Remove logics for CentOS 8

.... because CentOS 8 (Stream) is no longer supported.

Change-Id: I16fdf7a5685f6dc8371bed3800dfc26d7f1536ec

CentOS: Purge advanced-virt repository

This is follow-up of 7c456d4b698817e185a11e8cee5cc30aa333cc89 and makes
sure the advanced-virt repository is purged when disabled.

Related-Bug: #1969484
Change-Id: I268675a4d17eb63861de5966e5b95434b792dd10

CentOS: Deprecate the stream parameter

... because now only CentOS Steam 9 is supported.

Change-Id: I9d39f23159505cec8fbcdd055e6c1fed4b995115

cs9: Fix URL for OpenStack packages

CentOS Stream 9 packages are hosted at mirror.stream.centos.org instead
of mirror.centos.org. Also the directory structure is a bit different
in the new mirror server.

Closes-Bug: #1978332
Change-Id: Ie8436a527fc308b70a7c3b34fb86a32604f836ff

cs9: Do not enable advanced virtualization repository

The advanced virtualization repository is not available for CentOS
Stream 9. This change disables the repository by default accordingly.

Closes-Bug: #1969484
Change-Id: If888cf4f37a625f54ba89ae40a4f30e76c11987e
"
381,puppet-openstack_extras/manifests/repo/debian/params.pp,"Ubuntu/Debian: Switch to yoga

Change-Id: If5d114d663459ee44d9191d50a98c4e264e3309b
"
382,puppet-openstack_extras/manifests/repo/debian/debian.pp,"Remove deprecated manage_whz

... because it was deprecated several cycles ago[1].

[1] 9b63dc312ee289681106573d542b7c3a1e4a0ead

Change-Id: I60e37d1c555422c65760705377a7f9c469142e3f
"
383,puppet-rally/manifests/settings.pp,"Migrate parameters to the [openstack] section (2)

The [user_context] parameters and the [cleanup] parameters were moved
to the [openstack] section by [1]. This change updates the parameter
sections accordingly.

[1] 4f955b08ec34b5144594bc52b086b24941d51323

Change-Id: I7306bf71b02a2d6e783334b7854515725cc05f0e

Add support for octavia_* parameters

Change-Id: I2e64b0864bed786d1c3f2912a3fddb7bdc7c9176
"
384,puppet-rally/manifests/init.pp,"CentOS: Install openstack plugin package

Currently plugins and jobs for OpenStack environment are not included
by the base rally package but these are provided by the independent
plugin package. This change ensures the plugin package is installed.

Note that the plugin package is not available in Ubuntu/Debian now so
the package is still missing in these distributions.

Closes-Bug: #1969113
Change-Id: I7b3b285f1cb298bbabae012862ae5dc1223bf602
"
385,puppet-rally/manifests/params.pp,"CentOS: Install openstack plugin package

Currently plugins and jobs for OpenStack environment are not included
by the base rally package but these are provided by the independent
plugin package. This change ensures the plugin package is installed.

Note that the plugin package is not available in Ubuntu/Debian now so
the package is still missing in these distributions.

Closes-Bug: #1969113
Change-Id: I7b3b285f1cb298bbabae012862ae5dc1223bf602
"
386,puppet-rally/manifests/settings/cinder.pp,"Cinder: Support tuning parameters for backup feature

Change-Id: I0154bcc2f4c4061c8b567ed9e84f2e1497fc0247

Remove clean up logics for older releases

These logics were added during Yoga cycle by [1]. Because the old
parameters should be removed by these clean up logic when a deployment
is upgraded to Yoga, the logics are no longer required in Zed and
later.

[1] 08640cf6702624e2ad9f2c13ebdcb38201ebe87b

Change-Id: I6b56b05479216eb3249fa016eced0caa7b052875

Migrate parameters to the [openstack] section

The parameters in the [benchmark] section and the [tempest] section
were deprecated and have been migrated to the [openstack] section[1].
This change updates the parameters used to define parameters under
the new section.

[1] e9539a16fe2e110d7b60a0f0dc95debf715fed36

Change-Id: I0bfabb0d2585a2093c6385325b69322b3041c022
"
387,puppet-rally/manifests/settings/ec2.pp,"Remove clean up logics for older releases

These logics were added during Yoga cycle by [1]. Because the old
parameters should be removed by these clean up logic when a deployment
is upgraded to Yoga, the logics are no longer required in Zed and
later.

[1] 08640cf6702624e2ad9f2c13ebdcb38201ebe87b

Change-Id: I6b56b05479216eb3249fa016eced0caa7b052875

Migrate parameters to the [openstack] section

The parameters in the [benchmark] section and the [tempest] section
were deprecated and have been migrated to the [openstack] section[1].
This change updates the parameters used to define parameters under
the new section.

[1] e9539a16fe2e110d7b60a0f0dc95debf715fed36

Change-Id: I0bfabb0d2585a2093c6385325b69322b3041c022
"
388,puppet-rally/manifests/settings/glance.pp,"Remove clean up logics for older releases

These logics were added during Yoga cycle by [1]. Because the old
parameters should be removed by these clean up logic when a deployment
is upgraded to Yoga, the logics are no longer required in Zed and
later.

[1] 08640cf6702624e2ad9f2c13ebdcb38201ebe87b

Change-Id: I6b56b05479216eb3249fa016eced0caa7b052875

Migrate parameters to the [openstack] section

The parameters in the [benchmark] section and the [tempest] section
were deprecated and have been migrated to the [openstack] section[1].
This change updates the parameters used to define parameters under
the new section.

[1] e9539a16fe2e110d7b60a0f0dc95debf715fed36

Change-Id: I0bfabb0d2585a2093c6385325b69322b3041c022
"
389,puppet-rally/manifests/settings/heat.pp,"Remove clean up logics for older releases

These logics were added during Yoga cycle by [1]. Because the old
parameters should be removed by these clean up logic when a deployment
is upgraded to Yoga, the logics are no longer required in Zed and
later.

[1] 08640cf6702624e2ad9f2c13ebdcb38201ebe87b

Change-Id: I6b56b05479216eb3249fa016eced0caa7b052875

Remove deprecated role parameters

... because these were deprecated during the previous Yoga cycle[1].

[1] 411dffea5d65c5524fb003cf05bb92659e8d057f

Change-Id: I317fb90858e6fcd542735cc50d36670dd8cf5749

Deprecate usage of [role] parameters

The parameters under the [role] section were deprecated in 0.5.0[1],
and were removed in 0.9.0 . These parameters should be now set in
the [openstack] section and this is supported by the different
rally::settings::tempest class.

[1] 48b99755826fc4851b0aadad2ea92a4d4b4a5857
[2] 435401e0089fa4861709d850ecf49aa9ac974d3c

Change-Id: I3080dc51e38bed05b358974ab25f37e3664bf31a

Migrate parameters to the [openstack] section

The parameters in the [benchmark] section and the [tempest] section
were deprecated and have been migrated to the [openstack] section[1].
This change updates the parameters used to define parameters under
the new section.

[1] e9539a16fe2e110d7b60a0f0dc95debf715fed36

Change-Id: I0bfabb0d2585a2093c6385325b69322b3041c022
"
390,puppet-rally/manifests/settings/ironic.pp,"Remove clean up logics for older releases

These logics were added during Yoga cycle by [1]. Because the old
parameters should be removed by these clean up logic when a deployment
is upgraded to Yoga, the logics are no longer required in Zed and
later.

[1] 08640cf6702624e2ad9f2c13ebdcb38201ebe87b

Change-Id: I6b56b05479216eb3249fa016eced0caa7b052875

Migrate parameters to the [openstack] section

The parameters in the [benchmark] section and the [tempest] section
were deprecated and have been migrated to the [openstack] section[1].
This change updates the parameters used to define parameters under
the new section.

[1] e9539a16fe2e110d7b60a0f0dc95debf715fed36

Change-Id: I0bfabb0d2585a2093c6385325b69322b3041c022
"
391,puppet-rally/manifests/settings/magnum.pp,"Remove clean up logics for older releases

These logics were added during Yoga cycle by [1]. Because the old
parameters should be removed by these clean up logic when a deployment
is upgraded to Yoga, the logics are no longer required in Zed and
later.

[1] 08640cf6702624e2ad9f2c13ebdcb38201ebe87b

Change-Id: I6b56b05479216eb3249fa016eced0caa7b052875

Migrate parameters to the [openstack] section

The parameters in the [benchmark] section and the [tempest] section
were deprecated and have been migrated to the [openstack] section[1].
This change updates the parameters used to define parameters under
the new section.

[1] e9539a16fe2e110d7b60a0f0dc95debf715fed36

Change-Id: I0bfabb0d2585a2093c6385325b69322b3041c022
"
392,puppet-rally/manifests/settings/manila.pp,"Remove clean up logics for older releases

These logics were added during Yoga cycle by [1]. Because the old
parameters should be removed by these clean up logic when a deployment
is upgraded to Yoga, the logics are no longer required in Zed and
later.

[1] 08640cf6702624e2ad9f2c13ebdcb38201ebe87b

Change-Id: I6b56b05479216eb3249fa016eced0caa7b052875

Migrate parameters to the [openstack] section

The parameters in the [benchmark] section and the [tempest] section
were deprecated and have been migrated to the [openstack] section[1].
This change updates the parameters used to define parameters under
the new section.

[1] e9539a16fe2e110d7b60a0f0dc95debf715fed36

Change-Id: I0bfabb0d2585a2093c6385325b69322b3041c022
"
393,puppet-rally/manifests/settings/mistral.pp,"Remove clean up logics for older releases

These logics were added during Yoga cycle by [1]. Because the old
parameters should be removed by these clean up logic when a deployment
is upgraded to Yoga, the logics are no longer required in Zed and
later.

[1] 08640cf6702624e2ad9f2c13ebdcb38201ebe87b

Change-Id: I6b56b05479216eb3249fa016eced0caa7b052875

Migrate parameters to the [openstack] section

The parameters in the [benchmark] section and the [tempest] section
were deprecated and have been migrated to the [openstack] section[1].
This change updates the parameters used to define parameters under
the new section.

[1] e9539a16fe2e110d7b60a0f0dc95debf715fed36

Change-Id: I0bfabb0d2585a2093c6385325b69322b3041c022
"
394,puppet-rally/manifests/settings/monasca.pp,"Remove clean up logics for older releases

These logics were added during Yoga cycle by [1]. Because the old
parameters should be removed by these clean up logic when a deployment
is upgraded to Yoga, the logics are no longer required in Zed and
later.

[1] 08640cf6702624e2ad9f2c13ebdcb38201ebe87b

Change-Id: I6b56b05479216eb3249fa016eced0caa7b052875

Migrate parameters to the [openstack] section

The parameters in the [benchmark] section and the [tempest] section
were deprecated and have been migrated to the [openstack] section[1].
This change updates the parameters used to define parameters under
the new section.

[1] e9539a16fe2e110d7b60a0f0dc95debf715fed36

Change-Id: I0bfabb0d2585a2093c6385325b69322b3041c022
"
395,puppet-rally/manifests/settings/murano.pp,"Remove clean up logics for older releases

These logics were added during Yoga cycle by [1]. Because the old
parameters should be removed by these clean up logic when a deployment
is upgraded to Yoga, the logics are no longer required in Zed and
later.

[1] 08640cf6702624e2ad9f2c13ebdcb38201ebe87b

Change-Id: I6b56b05479216eb3249fa016eced0caa7b052875

Migrate parameters to the [openstack] section

The parameters in the [benchmark] section and the [tempest] section
were deprecated and have been migrated to the [openstack] section[1].
This change updates the parameters used to define parameters under
the new section.

[1] e9539a16fe2e110d7b60a0f0dc95debf715fed36

Change-Id: I0bfabb0d2585a2093c6385325b69322b3041c022
"
396,puppet-rally/manifests/settings/nova.pp,"Remove clean up logics for older releases

These logics were added during Yoga cycle by [1]. Because the old
parameters should be removed by these clean up logic when a deployment
is upgraded to Yoga, the logics are no longer required in Zed and
later.

[1] 08640cf6702624e2ad9f2c13ebdcb38201ebe87b

Change-Id: I6b56b05479216eb3249fa016eced0caa7b052875

Migrate parameters to the [openstack] section

The parameters in the [benchmark] section and the [tempest] section
were deprecated and have been migrated to the [openstack] section[1].
This change updates the parameters used to define parameters under
the new section.

[1] e9539a16fe2e110d7b60a0f0dc95debf715fed36

Change-Id: I0bfabb0d2585a2093c6385325b69322b3041c022
"
397,puppet-rally/manifests/settings/sahara.pp,"Remove clean up logics for older releases

These logics were added during Yoga cycle by [1]. Because the old
parameters should be removed by these clean up logic when a deployment
is upgraded to Yoga, the logics are no longer required in Zed and
later.

[1] 08640cf6702624e2ad9f2c13ebdcb38201ebe87b

Change-Id: I6b56b05479216eb3249fa016eced0caa7b052875

Migrate parameters to the [openstack] section

The parameters in the [benchmark] section and the [tempest] section
were deprecated and have been migrated to the [openstack] section[1].
This change updates the parameters used to define parameters under
the new section.

[1] e9539a16fe2e110d7b60a0f0dc95debf715fed36

Change-Id: I0bfabb0d2585a2093c6385325b69322b3041c022
"
398,puppet-rally/manifests/settings/tempest.pp,"Remove clean up logics for older releases

These logics were added during Yoga cycle by [1]. Because the old
parameters should be removed by these clean up logic when a deployment
is upgraded to Yoga, the logics are no longer required in Zed and
later.

[1] 08640cf6702624e2ad9f2c13ebdcb38201ebe87b

Change-Id: I6b56b05479216eb3249fa016eced0caa7b052875

Migrate parameters to the [openstack] section

The parameters in the [benchmark] section and the [tempest] section
were deprecated and have been migrated to the [openstack] section[1].
This change updates the parameters used to define parameters under
the new section.

[1] e9539a16fe2e110d7b60a0f0dc95debf715fed36

Change-Id: I0bfabb0d2585a2093c6385325b69322b3041c022
"
399,puppet-rally/manifests/settings/watcher.pp,"Remove clean up logics for older releases

These logics were added during Yoga cycle by [1]. Because the old
parameters should be removed by these clean up logic when a deployment
is upgraded to Yoga, the logics are no longer required in Zed and
later.

[1] 08640cf6702624e2ad9f2c13ebdcb38201ebe87b

Change-Id: I6b56b05479216eb3249fa016eced0caa7b052875

Migrate parameters to the [openstack] section

The parameters in the [benchmark] section and the [tempest] section
were deprecated and have been migrated to the [openstack] section[1].
This change updates the parameters used to define parameters under
the new section.

[1] e9539a16fe2e110d7b60a0f0dc95debf715fed36

Change-Id: I0bfabb0d2585a2093c6385325b69322b3041c022
"
400,puppet-rally/manifests/settings/swift.pp,"Remove deprecated role parameters

... because these were deprecated during the previous Yoga cycle[1].

[1] 411dffea5d65c5524fb003cf05bb92659e8d057f

Change-Id: I317fb90858e6fcd542735cc50d36670dd8cf5749

Deprecate usage of [role] parameters

The parameters under the [role] section were deprecated in 0.5.0[1],
and were removed in 0.9.0 . These parameters should be now set in
the [openstack] section and this is supported by the different
rally::settings::tempest class.

[1] 48b99755826fc4851b0aadad2ea92a4d4b4a5857
[2] 435401e0089fa4861709d850ecf49aa9ac974d3c

Change-Id: I3080dc51e38bed05b358974ab25f37e3664bf31a
"
401,puppet-rally/manifests/settings/octavia.pp,"Add support for octavia_* parameters

Change-Id: I2e64b0864bed786d1c3f2912a3fddb7bdc7c9176
"
402,puppet-rally/manifests/db.pp,"Remove deprecated database_min_pool_size

... because it was deprecated during Ussuri cycle.

Change-Id: Ia97a8bf53140ea9553e8438578f217ac55af1108

Remove ineffective pick functions

The rally class doesn't have any database parameters thus the logic
to pick these parameters are never used.

Change-Id: I77dbb47ebe0af89b8dede09b3f675c740eb7bc0c
"
403,puppet-ovn/manifests/northd.pp,"Add support for SSL connections to NB/SB DB

To allow ovn-northd to connect over SSL, the key, cert and cacert needs
to be set.

Co-Authored-By: Jake Yip <jake.yip@ardc.edu.au>
Change-Id: I574992748506e357af383588fb89b45203dee738

Add support for clustered DB

For a cluster db, nb_db and sb_db should be set to the cluster
addresses[1] instead of default local unix socket.

[1]
e.g. ssl:192.0.2.1:6645,ssl:192.0.2.2:6645,ssl:192.0.2.3:6645

Change-Id: I8f3a8ae0b7c3803726568cf4a1a132a874d00aa9

Refactor generation of northd options

This change refactors the logic to generate northd options.
The main change is to split individual options to a separate string and
concatenate the arrays of options to get the all options.

Change-Id: I4094214cb790497bbab36968fe97d93366898e67
"
404,puppet-ovn/manifests/controller.pp,"Merge ""Remove logic to support $::os_service_default""
Remove logic to support $::os_service_default

... because support for $::os_service_default was deprecated[1] during
the previous cycle.

[1] 5c809de01630ee7eede500106143810ca57b58b5

Change-Id: Idb92e3d4f52eefabca992c027f1576700fc63234

Add an extra space to align variables in class ovn::controller

Add an extra space to align variables in class ovn::controller

Change-Id: I40afe284da3b6c0b6f7d6af813a24801f8f40654

Add support for ovn-ofctrl-wait-before-clear

Support was added for this option [1] to avoid dataplane downtime
during ovn upgrades where schema changes have happened. This
adds the ability for us to configure it.

[1] https://patchwork.ozlabs.org/project/ovn/patch/20220808182845.2746916-2-mmichels@redhat.com/

Change-Id: Ia3112b9a219b90af718c49776da49078449f09a2

Remove redundant resource order

The puppet-vswitch module already makes sure that the vs_config
resource automatically requires the openvswitch service. Thus defining
the same order is not necessary.

Change-Id: I8825a7438ba20be97da71acabd57604e7948e130

Fix options unmanged by default

The following options are not managed unless the corresponding
parameters are set.

 - external_ids:ovn-cms-options
 - external_ids:ovn-chassis-mac-mappings

This change ensures these are purged by default, to avoid leaving old
settings.

Change-Id: Id98eb9b2da1248b6e49015c8588ceb901362ce72

Add support for external_ids:ovn-encap-tos

... which is available since v21.12.0[1].

[1] https://github.com/ovn-org/ovn/commit/9f2eb5cdb6d67fc8c7e6f477bc4bdc94cfbca028

Change-Id: I33931579b15a1629007dbe3a3d48433739b0ce56

Ensure ovn-bridge-datapath-type is removed by default

This is follow-up of 5c809de01630ee7eede500106143810ca57b58b5 and
ensures the ovn-bridge-datapath-type option is removed by default.
Current Puppet does not ensure the value in case a nil value is passed
thus setting value => undef has no effect.

Change-Id: Ia7e85756882606912e06a6742cd35517b568dffe

Merge ""Use native property to set mac table size""
Use native property to set mac table size

Related-Bug: #1958873
Depends-on: https://review.opendev.org/850086
Change-Id: Ic9ed651720dc6089cb81a6b303695e62883ad7bd

Stop converting integer/boolean in vs_config

Now the vs_config resource type accepts integer or boolean and we don't
need to convert these types to strings.

Depends-on: https://review.opendev.org/823244
Change-Id: Id1d2d6eda7747ae7a751214860eed560a5a32499

Fix validation of datapath_type

Commit 5c809de01630ee7eede500106143810ca57b58b5 updated default value
of $datapath_type but the validation logic was not properly updated.
This change fixes the logic so that it properly fail with the new
default value (undef).

Change-Id: If44a90a817bf1fd5d5b9bd15fa915243a048a196
"
405,puppet-ovn/manifests/controller/bridge.pp,"Use native property to set mac table size

Related-Bug: #1958873
Depends-on: https://review.opendev.org/850086
Change-Id: Ic9ed651720dc6089cb81a6b303695e62883ad7bd
"
406,puppet-openstack-cookiecutter/puppet-{{cookiecutter.project_name}}/manifests/deps.pp,"Fix dependencies related to openstacklib::policy

Since [1] was merged, not only openstacklib::poliy::base but also
openstacklib::policy::default is included to manage the policy file.
This change ensure openstacklib::policy::default is executed after
the packages are installed.

[1] 740d1bb822e8543535a2fccb4f2eab4b5809422c

Change-Id: Ia100cbf628590218dfa4afa051b0fa8acd024a5a
"
407,puppet-openstack-cookiecutter/puppet-{{cookiecutter.project_name}}/manifests/keystone/auth.pp,"Simplify definition to ensure keystone resource creation

Use the whole resource type instead of its individual resources, to
rely on interface instead of implementation of the dependent module.

Change-Id: I00b501ff5a9e0411445c253febb7f60f31f8babf

Allow customizing project/system roles

Change-Id: Id3b65ff4dcc973b74298ea91f9da7cbafa0f5da7

Use consistent service description

Change-Id: I0a0271139563e2c75cc54fa8957a2a51f2dd0606

Skip dependency on keystone endpoint if endpoint is not configured

Change-Id: I198635c5d867d80c40cc43a0ba783aa559d28e51
"
408,puppet-openstack-cookiecutter/puppet-{{cookiecutter.project_name}}/manifests/policy.pp,"Allow purging policy files

This change introduces the new purge_config parameter to the policy
class so that any policy rules not managed by puppet manifests can be
cleared.

Change-Id: I1c0739759c43996def7777c4f9aec667d45c2afc
Co-Authored-By: Martin Schuppert <mschuppert@redhat.com>
Depends-On: https://review.opendev.org/802305
"
409,puppet-openstack-cookiecutter/puppet-{{cookiecutter.project_name}}/manifests/keystone/authtoken.pp,"Add support for [keystone_authtoken] system_scope

Change-Id: I07bf595085fda652f059bfc9dd5d9330d5ed3278
"
410,puppet-qdr/manifests/init.pp,"Fix type validation of qdr::listener_port

Currently qdr::listener_port is set to a string by default and triggers
the following warning.

validate_legacy(validate_re) expects an Integer value, got String at
[""/etc/puppetlabs/code/modules/qdr/manifests/init.pp"", 198]:

This change fixes type validation logic about the parameter to get rid
of the warning.

Change-Id: I78203816bd91c8efe0673045fdc6956c83044053

Fix lint errors with the latest lint packages

This change fixes the following lint errors discovered since we removed
pin of lint packages.

manifests/init.pp:218:WARNING: absolute class name reference
manifests/init.pp:219:WARNING: absolute class name reference
manifests/init.pp:220:WARNING: absolute class name reference

Change-Id: I13332d9c2a91d2b10494ec9f77652cc564d454b2
"
411,puppet-qdr/manifests/params.pp,"Drop Fedora support

Fedora support is never tested, and has been unmaintained for a while.
Because we don't expect any actual user using OpenStack on Fedora, this
change drops support for Fedora directly.

Change-Id: Id0f6bf8e1e1f622c957477a8895ac99584176f33
"
